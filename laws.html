<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VA Driving Clinic - Module 6: Obscure Traffic Laws in Virginia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --color-primary: #5f17eb; /* Your exact brand purple */
            --color-primary-soft: #8a5feb;
            --color-secondary: #000000; /* Black */
            --color-accent: #7c3aed;
            --color-success: #10b981;
            --color-error: #ef4444;
            --color-warning: #f59e0b;
            --color-bg: #ffffff; /* White */
            --color-text: #000000; /* Black */
            --color-muted: #6b7280;
            --color-dark: #000000; /* Black */
            --color-light: #f9fafb;
            --radius-lg: 20px;
            --radius-md: 12px;
            --radius-sm: 8px;
            --shadow-soft: 0 10px 30px rgba(95, 23, 235, 0.1);
            --shadow-hover: 0 15px 35px rgba(95, 23, 235, 0.15);
            --shadow-card: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 24px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            color: var(--color-text);
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            body { padding: 12px; }
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes wobble {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(2deg); }
            75% { transform: rotate(-2deg); }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(95, 23, 235, 0.5); }
            50% { box-shadow: 0 0 20px rgba(95, 23, 235, 0.8); }
        }

        /* Main Container */
        .page {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--color-bg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-soft);
            padding: 30px;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease-out;
            border: 1px solid rgba(95, 23, 235, 0.1);
        }

        @media (max-width: 900px) {
            .page { padding: 20px; }
        }

        @media (max-width: 480px) {
            body { padding: 0; }
            .page {
                border-radius: 0;
                box-shadow: none;
                padding: 16px 12px 20px;
            }
        }

        /* Header */
        .brand-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            width: 100%;
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .brand-logo {
            height: 50px;
            width: auto;
            max-width: 100%;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .brand-logo:hover { 
            transform: scale(1.05); 
            animation: glow 2s infinite;
        }

        .course-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
            max-width: 100%;
        }

        .course-name {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--color-primary);
            font-weight: 700;
        }

        .week-label {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(95, 23, 235, 0.1);
            font-size: 0.8rem;
            color: var(--color-primary);
            font-weight: 600;
            border: 1px solid rgba(95, 23, 235, 0.2);
        }

        .week-label-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--color-primary);
            flex-shrink: 0;
            animation: pulse 2s infinite;
        }

        .badge-mode {
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(95, 23, 235, 0.08);
            border: 1px solid rgba(95, 23, 235, 0.15);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-primary);
            white-space: nowrap;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .badge-mode:hover {
            background: rgba(95, 23, 235, 0.15);
            border-color: var(--color-primary);
            transform: translateY(-2px);
        }

        h1 {
            font-size: clamp(1.8rem, 3vw, 2.4rem);
            line-height: 1.1;
            color: var(--color-text);
            margin-bottom: 10px;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        .module-subtitle {
            font-size: 1rem;
            color: var(--color-muted);
            max-width: 800px;
            margin-bottom: 28px;
            animation: fadeInUp 0.6s ease-out 0.4s both;
            line-height: 1.7;
        }

        /* Time Estimate Banner */
        .time-estimate-banner {
            background: linear-gradient(135deg, rgba(95, 23, 235, 0.1) 0%, rgba(124, 58, 237, 0.1) 100%);
            border: 2px solid rgba(95, 23, 235, 0.2);
            border-radius: var(--radius-md);
            padding: 15px 20px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: fadeIn 0.5s ease;
        }

        .time-estimate-icon {
            font-size: 1.5rem;
            color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .time-estimate-content h3 {
            color: var(--color-primary);
            font-size: 1rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .time-estimate-content p {
            color: var(--color-text);
            font-size: 0.9rem;
            margin: 0;
        }

        .time-highlight {
            color: var(--color-primary);
            font-weight: 800;
            font-size: 1.1em;
        }

        /* Stats Display */
        .stats-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 600px) {
            .stats-display { grid-template-columns: 1fr; }
        }

        .stat-card {
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(95, 23, 235, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--color-primary);
            display: block;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--color-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        /* Progress Tracker */
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            padding: 0 20px;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 50px;
            right: 50px;
            height: 3px;
            background: rgba(95, 23, 235, 0.1);
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid rgba(95, 23, 235, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-circle {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
            transform: scale(1.1);
            animation: pulse 2s infinite;
        }

        .progress-step.completed .step-circle {
            background: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        .step-label {
            font-size: 0.75rem;
            color: var(--color-muted);
            text-align: center;
            font-weight: 600;
        }

        .progress-step.active .step-label {
            color: var(--color-primary);
            font-weight: 700;
        }

        /* Activity Card */
        .activity-card {
            background: var(--color-bg);
            border-radius: var(--radius-md);
            border: 1px solid rgba(95, 23, 235, 0.15);
            padding: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--color-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--color-primary);
        }

        .activity-card:hover::before { 
            opacity: 1;
            animation: glow 2s infinite;
        }

        .activity-card.completed {
            border-color: var(--color-success);
        }

        .activity-card.completed::before {
            background: var(--color-success);
            opacity: 1;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .activity-number {
            font-size: 0.85rem;
            font-weight: 800;
            color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid rgba(95, 23, 235, 0.2);
        }

        .activity-status {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 12px;
            background: rgba(95, 23, 235, 0.08);
            color: var(--color-primary);
            font-weight: 600;
            border: 1px solid rgba(95, 23, 235, 0.15);
        }

        .activity-card.completed .activity-status {
            background: rgba(16, 185, 129, 0.1);
            color: var(--color-success);
            border-color: rgba(16, 185, 129, 0.2);
        }

        .activity-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--color-text);
            margin-bottom: 15px;
        }

        .activity-description {
            font-size: 0.95rem;
            color: var(--color-muted);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* Law Categories */
        .law-categories {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 900px) {
            .law-categories { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 480px) {
            .law-categories { grid-template-columns: 1fr; }
        }

        .law-category {
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-md);
            padding: 25px;
            border: 2px solid rgba(95, 23, 235, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
        }

        .law-category:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.1);
        }

        .law-category.selected {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            animation: glow 2s infinite;
        }

        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--color-primary);
        }

        .category-title {
            font-size: 1rem;
            font-weight: 800;
            color: var(--color-text);
            margin-bottom: 10px;
        }

        .category-count {
            font-size: 0.85rem;
            color: var(--color-primary);
            font-weight: 700;
        }

        /* Law Cards */
        .law-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 900px) {
            .law-cards { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            .law-cards { grid-template-columns: 1fr; }
        }

        .law-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 25px;
            border: 2px solid rgba(95, 23, 235, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .law-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.1);
        }

        .law-card.selected {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.05);
        }

        .law-card.correct {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.05);
        }

        .law-card.incorrect {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.05);
            animation: shake 0.5s ease;
        }

        .law-status {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .law-card.correct .law-status {
            background: var(--color-success);
            color: white;
            opacity: 1;
        }

        .law-card.incorrect .law-status {
            background: var(--color-error);
            color: white;
            opacity: 1;
        }

        .law-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--color-primary);
        }

        .law-title {
            font-size: 1rem;
            font-weight: 800;
            color: var(--color-text);
            margin-bottom: 10px;
        }

        .law-description {
            font-size: 0.85rem;
            color: var(--color-muted);
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .law-penalty {
            font-size: 0.8rem;
            color: var(--color-error);
            font-weight: 700;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(95, 23, 235, 0.1);
        }

        /* Scenario Simulation */
        .scenario-simulation {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: var(--radius-md);
            padding: 30px;
            margin: 25px 0;
            border: 2px solid rgba(95, 23, 235, 0.1);
            position: relative;
        }

        .scenario-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scenario-content {
            background: white;
            border-radius: var(--radius-md);
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid rgba(95, 23, 235, 0.1);
            line-height: 1.6;
        }

        .scenario-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        @media (max-width: 768px) {
            .scenario-options { grid-template-columns: 1fr; }
        }

        .scenario-option {
            background: white;
            border-radius: var(--radius-md);
            padding: 20px;
            border: 2px solid rgba(95, 23, 235, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .scenario-option:hover {
            transform: translateY(-3px);
            border-color: var(--color-primary);
            box-shadow: 0 5px 15px rgba(95, 23, 235, 0.1);
        }

        .scenario-option.selected {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.05);
        }

        .scenario-option.correct {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.05);
        }

        .scenario-option.incorrect {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.05);
            animation: shake 0.5s ease;
        }

        .option-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(95, 23, 235, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 15px;
            color: var(--color-primary);
        }

        .scenario-option.selected .option-number {
            background: var(--color-primary);
            color: white;
        }

        /* Myth vs Reality */
        .myth-reality {
            background: linear-gradient(135deg, rgba(95, 23, 235, 0.05) 0%, rgba(124, 58, 237, 0.05) 100%);
            border-radius: var(--radius-md);
            padding: 30px;
            margin: 25px 0;
            border: 2px solid rgba(95, 23, 235, 0.1);
        }

        .myth-reality-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .myth-reality-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .myth-reality-grid { grid-template-columns: 1fr; }
        }

        .myth-card, .reality-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 25px;
            border: 2px solid rgba(95, 23, 235, 0.1);
            transition: all 0.3s ease;
        }

        .myth-card {
            border-color: rgba(239, 68, 68, 0.3);
            background: rgba(239, 68, 68, 0.05);
        }

        .reality-card {
            border-color: rgba(16, 185, 129, 0.3);
            background: rgba(16, 185, 129, 0.05);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .myth-icon {
            color: var(--color-error);
            font-size: 1.5rem;
        }

        .reality-icon {
            color: var(--color-success);
            font-size: 1.5rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 800;
            color: var(--color-text);
        }

        .myth-title {
            color: var(--color-error);
        }

        .reality-title {
            color: var(--color-success);
        }

        /* Quiz Questions */
        .quiz-section {
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-md);
            padding: 30px;
            margin: 25px 0;
            border: 2px solid rgba(95, 23, 235, 0.1);
        }

        .quiz-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-question {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        @media (max-width: 768px) {
            .quiz-options { grid-template-columns: 1fr; }
        }

        .quiz-option {
            padding: 18px;
            border-radius: var(--radius-sm);
            border: 2px solid rgba(95, 23, 235, 0.2);
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quiz-option:hover {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.05);
            transform: translateY(-2px);
        }

        .quiz-option.selected {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            font-weight: 600;
        }

        .quiz-option.correct {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.1);
        }

        .quiz-option.incorrect {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.1);
        }

        .option-letter {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(95, 23, 235, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
            color: var(--color-primary);
            border: 1px solid rgba(95, 23, 235, 0.2);
        }

        .quiz-option.selected .option-letter {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        /* Penalty Display */
        .penalty-display {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(220, 38, 38, 0.05) 100%);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
            border: 2px solid rgba(239, 68, 68, 0.2);
        }

        .penalty-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-error);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .penalty-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .penalty-item {
            background: white;
            border-radius: var(--radius-sm);
            padding: 20px;
            border-left: 4px solid var(--color-error);
        }

        .penalty-law {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 8px;
        }

        .penalty-amount {
            font-size: 1.2rem;
            font-weight: 900;
            color: var(--color-error);
        }

        .penalty-details {
            font-size: 0.85rem;
            color: var(--color-muted);
            margin-top: 8px;
        }

        /* Feedback */
        .feedback-container {
            background: rgba(95, 23, 235, 0.03);
            border-radius: var(--radius-sm);
            padding: 20px;
            border: 1px solid rgba(95, 23, 235, 0.15);
            margin-top: 20px;
            display: none;
            border-left: 4px solid var(--color-primary);
        }

        .feedback-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback-title {
            font-size: 0.95rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .feedback-icon {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .feedback-icon.correct { 
            color: var(--color-success); 
        }
        
        .feedback-icon.incorrect { 
            color: var(--color-error); 
        }

        .feedback-content {
            font-size: 0.9rem;
            color: var(--color-text);
            line-height: 1.7;
        }

        .feedback-content strong { 
            color: var(--color-primary); 
            font-weight: 700;
        }

        .law-code {
            font-family: monospace;
            background: rgba(95, 23, 235, 0.1);
            padding: 3px 6px;
            border-radius: 4px;
            border: 1px solid rgba(95, 23, 235, 0.2);
            font-size: 0.85rem;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 28px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
            border: 2px solid var(--color-primary);
        }

        .btn-primary:hover {
            background: #4c0fcf;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.4);
            animation: glow 1.5s infinite;
        }

        .btn-secondary {
            background: white;
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
        }

        .btn-secondary:hover {
            background: rgba(95, 23, 235, 0.1);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(95, 23, 235, 0.2);
        }

        .btn-icon { 
            font-size: 1.2em; 
            font-weight: bold;
        }

        /* Results Panel */
        .results-panel {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: white;
            border-radius: var(--radius-md);
            padding: 40px;
            margin-top: 40px;
            display: none;
            animation: fadeInUp 0.6s ease;
            border: 2px solid var(--color-primary);
        }

        .results-panel.show { 
            display: block; 
            animation: glow 2s infinite;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .results-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: white;
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--color-primary);
            text-align: center;
            margin: 30px 0;
            text-shadow: 0 0 20px rgba(95, 23, 235, 0.7);
            animation: pulse 2s infinite;
        }

        .safety-insights {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            padding: 25px;
            margin-top: 25px;
            border-left: 4px solid var(--color-primary);
        }

        .insights-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .insights-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .insights-list li {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            font-size: 0.95rem;
            color: #e5e7eb;
            line-height: 1.6;
        }

        .insight-dot {
            width: 8px;
            height: 8px;
            margin-top: 10px;
            border-radius: 999px;
            background: var(--color-primary);
            flex-shrink: 0;
            animation: pulse 2s infinite;
        }

        /* Law Visualization */
        .law-visualization {
            background: white;
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
            border: 2px solid rgba(95, 23, 235, 0.1);
            box-shadow: var(--shadow-card);
        }

        .visual-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .visual-scene {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .visual-element {
            text-align: center;
            padding: 20px;
            border-radius: var(--radius-md);
            border: 2px solid rgba(95, 23, 235, 0.1);
            background: rgba(95, 23, 235, 0.05);
            min-width: 150px;
            transition: all 0.3s ease;
        }

        .visual-element.wrong {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.1);
            animation: wobble 0.5s ease;
        }

        .visual-element.correct {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.1);
        }

        .visual-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .visual-label {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--color-text);
        }
    </style>
</head>
<body>
    <main class="page" aria-labelledby="module-heading">
        <!-- Header -->
        <header class="brand-row">
            <div class="brand">
                <img
                    src="https://lwfiles.mycourse.app/vadrivingclinic-public/9f5c6b8121721c8ef241f929fd983b3e.png"
                    alt="VA Driving Clinic logo"
                    class="brand-logo"
                />
                <div class="course-meta">
                    <span class="course-name">VA Driving Clinic ‚Ä¢ Module 6</span>
                    <div class="week-label">
                        <span class="week-label-dot"></span>
                        <span>Obscure Traffic Laws in Virginia</span>
                    </div>
                </div>
            </div>
            <span class="badge-mode">Interactive Discovery</span>
        </header>

        <h1 id="module-heading">Virginia's Most Obscure Traffic Laws</h1>
        <p class="module-subtitle">
            Discover Virginia's hidden traffic regulations that most drivers don't know exist. These obscure laws can still result in fines and penalties, and understanding them can prevent surprising violations while enhancing road safety.
        </p>

        <!-- Time Estimate Banner -->
        <div class="time-estimate-banner">
            <div class="time-estimate-icon">
                üïµÔ∏è
            </div>
            <div class="time-estimate-content">
                <h3>Module Time Estimate</h3>
                <p>Complete this interactive lesson in approximately <span class="time-highlight">8 minutes</span>. Discover Virginia's most obscure traffic laws through interactive scenarios and surprising reveals.</p>
            </div>
        </div>

        <!-- Stats Display -->
        <div class="stats-display">
            <div class="stat-card">
                <span class="stat-number" id="laws-discovered">0</span>
                <span class="stat-label">Obscure Laws Found</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="myths-busted">0</span>
                <span class="stat-label">Myths Debunked</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="time-spent">0:00</span>
                <span class="stat-label">Time Learning</span>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Discover Laws</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Test Knowledge</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Avoid Penalties</div>
            </div>
        </div>

        <!-- Main Activity Card -->
        <div class="activity-card" id="main-activity">
            <div class="activity-header">
                <span class="activity-number">Obscure Laws Explorer</span>
                <span class="activity-status">In Progress</span>
            </div>
            <h3 class="activity-title">Virginia's Hidden Traffic Regulations</h3>
            <p class="activity-description">
                Explore Virginia's most obscure traffic laws through interactive discovery. Click on categories to reveal surprising regulations that can still result in fines and penalties for unwary drivers.
            </p>

            <!-- Part 1: Law Discovery -->
            <div id="discovery-part">
                <div class="law-categories">
                    <div class="law-category selected" data-category="driving">
                        <div class="category-icon">üöó</div>
                        <div class="category-title">Unusual Driving Laws</div>
                        <div class="category-count">4 obscure laws</div>
                    </div>
                    
                    <div class="law-category" data-category="pedestrian">
                        <div class="category-icon">üö∂</div>
                        <div class="category-title">Pedestrian Rules</div>
                        <div class="category-count">3 hidden rules</div>
                    </div>
                    
                    <div class="law-category" data-category="vehicle">
                        <div class="category-icon">üöô</div>
                        <div class="category-title">Vehicle Regulations</div>
                        <div class="category-count">4 obscure rules</div>
                    </div>
                    
                    <div class="law-category" data-category="bicycle">
                        <div class="category-icon">üö≤</div>
                        <div class="category-title">Bike & Motorcycle</div>
                        <div class="category-count">3 special laws</div>
                    </div>
                </div>

                <div class="law-cards" id="law-cards-container">
                    <!-- Driving Laws -->
                    <div class="law-card" data-category="driving" data-law="barefoot">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üë£</div>
                        <div class="law-title">Driving Barefoot</div>
                        <div class="law-description">It's legal to drive barefoot in Virginia, but strongly discouraged for safety reasons.</div>
                        <div class="law-penalty">No direct penalty, but can be cited for reckless driving if it causes an accident</div>
                    </div>
                    
                    <div class="law-card" data-category="driving" data-law="horses">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üêé</div>
                        <div class="law-title">Honking at Horses</div>
                        <div class="law-description">Virginia law prohibits honking at horse-drawn vehicles or horses on the road.</div>
                        <div class="law-penalty">Fine: $100-250</div>
                    </div>
                    
                    <div class="law-card" data-category="driving" data-law="dooring">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üö™</div>
                        <div class="law-title">Opening Car Doors</div>
                        <div class="law-description">Must check for traffic (including bicycles) before opening door on traffic side.</div>
                        <div class="law-penalty">Fine: $100 + liability for injuries</div>
                    </div>
                    
                    <div class="law-card" data-category="driving" data-law="uturn">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">‚Ü™Ô∏è</div>
                        <div class="law-title">U-Turn Restrictions</div>
                        <div class="law-description">Illegal where visibility is obstructed for 500 feet in either direction.</div>
                        <div class="law-penalty">Fine: $150 + 3 demerit points</div>
                    </div>
                    
                    <!-- Pedestrian Laws -->
                    <div class="law-card" data-category="pedestrian" data-law="jaywalking">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üö∑</div>
                        <div class="law-title">Jaywalking Definition</div>
                        <div class="law-description">Crossing between intersections where traffic signals exist, without using crosswalk.</div>
                        <div class="law-penalty">Fine: $50-100</div>
                    </div>
                    
                    <div class="law-card" data-category="pedestrian" data-law="ped-yield">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">ü§ö</div>
                        <div class="law-title">Pedestrian Yield</div>
                        <div class="law-description">Drivers must yield to pedestrians in ANY crosswalk (marked or unmarked).</div>
                        <div class="law-penalty">Fine: $100 + 4 demerit points</div>
                    </div>
                    
                    <div class="law-card" data-category="pedestrian" data-law="crosswalk-distance">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üìè</div>
                        <div class="law-title">Crosswalk Distance</div>
                        <div class="law-description">When no crosswalk exists, pedestrians must cross at intersection (not within 100 feet).</div>
                        <div class="law-penalty">Fine: $50</div>
                    </div>
                    
                    <!-- Vehicle Regulations -->
                    <div class="law-card" data-category="vehicle" data-law="obstruction">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üôà</div>
                        <div class="law-title">View Obstruction</div>
                        <div class="law-description">No objects can obstruct driver's view (including hanging items from mirror).</div>
                        <div class="law-penalty">Fine: $75-150</div>
                    </div>
                    
                    <div class="law-card" data-category="vehicle" data-law="parking-direction">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üÖøÔ∏è</div>
                        <div class="law-title">Parking Direction</div>
                        <div class="law-description">Must park in direction of traffic flow (no parking against traffic).</div>
                        <div class="law-penalty">Fine: $50-100</div>
                    </div>
                    
                    <div class="law-card" data-category="vehicle" data-law="mudflaps">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üí®</div>
                        <div class="law-title">Mudflap Requirement</div>
                        <div class="law-description">Commercial vehicles over certain weight must have mudflaps to prevent debris.</div>
                        <div class="law-penalty">Fine: $100-250</div>
                    </div>
                    
                    <div class="law-card" data-category="vehicle" data-law="snow-removal">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">‚ùÑÔ∏è</div>
                        <div class="law-title">Snow Removal</div>
                        <div class="law-description">Must clear ALL snow/ice from vehicle before driving (not just windshield).</div>
                        <div class="law-penalty">Fine: $100 + liability for damage</div>
                    </div>
                    
                    <!-- Bike & Motorcycle -->
                    <div class="law-card" data-category="bicycle" data-law="bike-rights">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üö¥</div>
                        <div class="law-title">Bicyclist Rights</div>
                        <div class="law-description">Bicyclists have same rights/duties as motor vehicles on roadways.</div>
                        <div class="law-penalty">Same as vehicles for violations</div>
                    </div>
                    
                    <div class="law-card" data-category="bicycle" data-law="motorcycle-passenger">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üèçÔ∏è</div>
                        <div class="law-title">Motorcycle Passenger</div>
                        <div class="law-description">Passengers must have designated seat and footrests (no handlebar riding).</div>
                        <div class="law-penalty">Fine: $100-250</div>
                    </div>
                    
                    <div class="law-card" data-category="bicycle" data-law="bike-reflectors">
                        <div class="law-status">‚úì</div>
                        <div class="law-icon">üî¶</div>
                        <div class="law-title">Bike Night Requirements</div>
                        <div class="law-description">Bicycles must have front light, rear reflector, and side reflectors at night.</div>
                        <div class="law-penalty">Fine: $25-50</div>
                    </div>
                </div>

                <div class="feedback-container" id="discovery-feedback">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">üïµÔ∏è</span>
                        Obscure Laws Discovered
                    </div>
                    <div class="feedback-content">
                        <strong>Virginia Code References:</strong><br><br>
                        
                        ‚Ä¢ <strong>¬ß 46.2-816:</strong> Opening vehicle doors - Must not open "unless and until it is reasonably safe to do so"<br>
                        ‚Ä¢ <strong>¬ß 46.2-817:</strong> Horse-drawn vehicles - No horn honking when passing<br>
                        ‚Ä¢ <strong>¬ß 46.2-921.1:</strong> U-turns - Prohibited where visibility obstructed for 500 feet<br>
                        ‚Ä¢ <strong>¬ß 46.2-1049:</strong> Obstructed view - No objects that "obstruct or reduce the driver's clear view"<br><br>
                        
                        <strong>Why These Laws Matter:</strong> While obscure, these laws address specific safety concerns. The "dooring" law prevents bicycle accidents, horse laws prevent animal panic, and obstruction laws maintain visibility.
                    </div>
                </div>
            </div>

            <!-- Part 2: Scenario Testing -->
            <div id="scenario-part" style="display: none;">
                <div class="scenario-simulation">
                    <h4 class="scenario-title">Scenario 1: The Horse Dilemma</h4>
                    
                    <div class="scenario-content">
                        You're driving through rural Virginia near Lexington. You approach a horse-drawn Amish buggy traveling slowly on the narrow road. There's oncoming traffic, so you need to wait to pass. The horse seems skittish. What should you do?
                    </div>
                    
                    <div class="scenario-options">
                        <div class="scenario-option" data-scenario="1" data-option="A">
                            <div class="option-number">A</div>
                            <div>
                                <strong>Honk lightly to alert the buggy driver</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">Let them know you're waiting to pass</div>
                            </div>
                        </div>
                        
                        <div class="scenario-option" data-scenario="1" data-option="B">
                            <div class="option-number">B</div>
                            <div>
                                <strong>Turn on hazard lights and wait patiently</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">Signal to others while staying quiet</div>
                            </div>
                        </div>
                        
                        <div class="scenario-option" data-scenario="1" data-option="C">
                            <div class="option-number">C</div>
                            <div>
                                <strong>Rev engine slightly to encourage movement</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">The horse might move faster with encouragement</div>
                            </div>
                        </div>
                        
                        <div class="scenario-option" data-scenario="1" data-option="D">
                            <div class="option-number">D</div>
                            <div>
                                <strong>Pass quickly when safe, staying as far left as possible</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">Minimize time near the horse</div>
                            </div>
                        </div>
                    </div>
                    
                    <h4 class="scenario-title" style="margin-top: 40px;">Scenario 2: The Snowy Morning</h4>
                    
                    <div class="scenario-content">
                        It snowed overnight in Charlottesville. You clear just enough snow from your windshield to see. You're running late for work. Virginia law requires you to:
                    </div>
                    
                    <div class="scenario-options">
                        <div class="scenario-option" data-scenario="2" data-option="A">
                            <div class="option-number">A</div>
                            <div>
                                <strong>Clear only the windshield and front side windows</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">These are the minimum for safe driving</div>
                            </div>
                        </div>
                        
                        <div class="scenario-option" data-scenario="2" data-option="B">
                            <div class="option-number">B</div>
                            <div>
                                <strong>Clear ALL snow/ice from the entire vehicle</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">Roof, hood, trunk, windows, lights</div>
                            </div>
                        </div>
                        
                        <div class="scenario-option" data-scenario="2" data-option="C">
                            <div class="option-number">C</div>
                            <div>
                                <strong>Just drive - snow will blow off at highway speeds</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">This is what most people do</div>
                            </div>
                        </div>
                        
                        <div class="scenario-option" data-scenario="2" data-option="D">
                            <div class="option-number">D</div>
                            <div>
                                <strong>Clear only what blocks your view and lights</strong>
                                <div style="font-size: 0.85rem; color: var(--color-muted); margin-top: 8px;">The practical approach</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feedback-container" id="scenario-feedback">
                        <div class="feedback-title">
                            <span class="feedback-icon correct">‚úì</span>
                            Scenario Analysis
                        </div>
                        <div class="feedback-content">
                            <strong>Correct Answers:</strong><br><br>
                            
                            <strong>Scenario 1: B - Turn on hazard lights and wait patiently</strong><br>
                            ‚Ä¢ Virginia law specifically prohibits honking at horse-drawn vehicles<br>
                            ‚Ä¢ Horses can be startled, causing accidents injuring riders and drivers<br>
                            ‚Ä¢ Must pass slowly with at least 3 feet clearance when safe<br>
                            ‚Ä¢ Fines up to $250 for violations<br><br>
                            
                            <strong>Scenario 2: B - Clear ALL snow/ice from the entire vehicle</strong><br>
                            ‚Ä¢ Virginia law (¬ß 46.2-1145) requires complete snow/ice removal<br>
                            ‚Ä¢ Roof snow can slide onto windshield or hit following vehicles<br>
                            ‚Ä¢ Fines up to $100 + liability for damage/injuries caused<br>
                            ‚Ä¢ Includes hood, roof, trunk, all windows, lights, and license plate
                        </div>
                    </div>
                </div>
            </div>

            <!-- Part 3: Myth vs Reality & Penalties -->
            <div id="quiz-part" style="display: none;">
                <div class="quiz-section">
                    <h4 class="quiz-title">Myth vs Reality Quiz</h4>
                    
                    <div class="myth-reality">
                        <h5 class="myth-reality-title">Common Misconceptions</h5>
                        
                        <div class="myth-reality-grid">
                            <div class="myth-card">
                                <div class="card-header">
                                    <div class="myth-icon">‚ùå</div>
                                    <div class="card-title myth-title">Myth</div>
                                </div>
                                <div class="law-description">
                                    It's illegal to drive barefoot in Virginia. You'll get a ticket if pulled over without shoes.
                                </div>
                            </div>
                            
                            <div class="reality-card">
                                <div class="card-header">
                                    <div class="reality-icon">‚úÖ</div>
                                    <div class="card-title reality-title">Reality</div>
                                </div>
                                <div class="law-description">
                                    Driving barefoot is legal in Virginia. However, if an accident occurs and barefoot driving contributed, you could be cited for reckless driving.
                                </div>
                            </div>
                            
                            <div class="myth-card">
                                <div class="card-header">
                                    <div class="myth-icon">‚ùå</div>
                                    <div class="card-title myth-title">Myth</div>
                                </div>
                                <div class="law-description">
                                    You only need to yield to pedestrians in marked crosswalks. Unmarked intersections don't count.
                                </div>
                            </div>
                            
                            <div class="reality-card">
                                <div class="card-header">
                                    <div class="reality-icon">‚úÖ</div>
                                    <div class="card-title reality-title">Reality</div>
                                </div>
                                <div class="law-description">
                                    Virginia law requires yielding to pedestrians in ANY crosswalk, marked or unmarked, at intersections.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="penalty-display" style="margin-top: 30px;">
                        <h5 class="penalty-title">Virginia Penalties for Obscure Violations</h5>
                        
                        <div class="penalty-items">
                            <div class="penalty-item">
                                <div class="penalty-law">Honking at Horse-Drawn Vehicles</div>
                                <div class="penalty-amount">$100 - $250</div>
                                <div class="penalty-details">Plus potential civil liability if accident occurs</div>
                            </div>
                            
                            <div class="penalty-item">
                                <div class="penalty-law">"Dooring" a Cyclist (Opening door into traffic)</div>
                                <div class="penalty-amount">$100 Fine + Civil Liability</div>
                                <div class="penalty-details">Medical bills + bike damage + pain/suffering</div>
                            </div>
                            
                            <div class="penalty-item">
                                <div class="penalty-law">Obstructed Driver View (Hanging items)</div>
                                <div class="penalty-amount">$75 - $150</div>
                                <div class="penalty-details">Air fresheners, decorations, GPS mounts can all violate</div>
                            </div>
                            
                            <div class="penalty-item">
                                <div class="penalty-law">Parking Against Traffic Flow</div>
                                <div class="penalty-amount">$50 - $100</div>
                                <div class="penalty-details">Common violation in residential areas</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="law-visualization" style="margin-top: 30px;">
                        <h5 class="visual-title">U-Turn Visibility Requirement</h5>
                        <div class="scenario-content" style="margin-bottom: 20px;">
                            Virginia law prohibits U-turns where visibility is obstructed for 500 feet in either direction. That's longer than 1.5 football fields!
                        </div>
                        
                        <div class="visual-scene">
                            <div class="visual-element correct">
                                <div class="visual-icon">üëÅÔ∏è</div>
                                <div class="visual-label">Clear 500+ Feet</div>
                                <div style="font-size: 0.8rem; color: var(--color-muted); margin-top: 5px;">‚úÖ Legal U-Turn</div>
                            </div>
                            
                            <div class="visual-element wrong">
                                <div class="visual-icon">üôà</div>
                                <div class="visual-label">Obstructed View</div>
                                <div style="font-size: 0.8rem; color: var(--color-muted); margin-top: 5px;">‚ùå Illegal U-Turn</div>
                            </div>
                            
                            <div class="visual-element">
                                <div class="visual-icon">üèà</div>
                                <div class="visual-label">1.5 Football Fields</div>
                                <div style="font-size: 0.8rem; color: var(--color-muted); margin-top: 5px;">500 feet visual requirement</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" style="margin-top: 30px;">
                        True or False: In Virginia, you can be ticketed for having too many air fresheners hanging from your rearview mirror.
                    </div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="1" data-option="A">
                            <span class="option-letter">A</span>
                            <span>True - Any obstruction of view can be ticketed</span>
                        </div>
                        <div class="quiz-option" data-question="1" data-option="B">
                            <span class="option-letter">B</span>
                            <span>False - Air fresheners are exempt from obstruction laws</span>
                        </div>
                    </div>
                    
                    <div class="quiz-question" style="margin-top: 30px;">
                        What is the minimum clearance you must give when passing a bicyclist in Virginia?
                    </div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="2" data-option="A">
                            <span class="option-letter">A</span>
                            <span>1 foot - Just enough to avoid hitting them</span>
                        </div>
                        <div class="quiz-option" data-question="2" data-option="B">
                            <span class="option-letter">B</span>
                            <span>3 feet - Required by Virginia's "Three Feet to Pass" law</span>
                        </div>
                        <div class="quiz-option" data-question="2" data-option="C">
                            <span class="option-letter">C</span>
                            <span>6 feet - Half a lane width for safety</span>
                        </div>
                        <div class="quiz-option" data-question="2" data-option="D">
                            <span class="option-letter">D</span>
                            <span>No specific requirement - just pass safely</span>
                        </div>
                    </div>
                    
                    <div class="feedback-container" id="quiz-feedback">
                        <div class="feedback-title">
                            <span class="feedback-icon correct">‚úì</span>
                            Quiz Results & Key Takeaways
                        </div>
                        <div class="feedback-content">
                            <strong>Correct Answers:</strong><br><br>
                            
                            1. <strong>A - True</strong> - Virginia law prohibits ANY object that obstructs driver's view, including air fresheners, GPS mounts, or decorations.<br><br>
                            
                            2. <strong>B - 3 feet</strong> - Virginia's "Three Feet to Pass" law (¬ß 46.2-839) requires at least 3 feet clearance when passing bicycles.<br><br>
                            
                            <div class="law-code" style="margin: 10px 0; padding: 10px;">
                                <strong>Virginia Code ¬ß 46.2-1054:</strong><br>
                                "No person shall drive any motor vehicle with any objects or signs placed or suspended in or upon the vehicle which materially obstruct, obscure, or impair the driver's clear view of the highway..."
                            </div>
                            
                            <strong>Safety Implications:</strong> These obscure laws aren't just technicalities - they address real safety concerns. The "dooring" law prevents serious bicycle accidents, horse laws prevent animal panic injuries, and obstruction laws maintain critical visibility.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-secondary" id="reset-btn">
                <span class="btn-icon">‚Üª</span>
                Reset Lesson
            </button>
            <button class="btn btn-secondary" id="next-part-btn">
                <span class="btn-icon">‚Üí</span>
                Next Section
            </button>
            <button class="btn btn-primary" id="complete-btn" disabled>
                <span class="btn-icon">üèÜ</span>
                Complete Discovery
            </button>
        </div>

        <!-- Results Panel -->
        <div class="results-panel" id="results-panel">
            <div class="results-header">
                <h2 class="results-title">Obscure Laws Mastery</h2>
                <div class="score-display" id="final-score">0%</div>
            </div>
            
            <div class="safety-insights">
                <h3 class="insights-title">
                    <span>üéØ</span> Why Obscure Laws Matter
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Historical Context:</strong> Many obscure laws have historical roots. The horse honking law dates to early 20th century when horse-drawn carriages were common in rural Virginia. The snow removal law was strengthened after a 2005 incident where roof ice killed another driver on I-81.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Safety Overlooked:</strong> The "dooring" law prevents 1,000+ bicycle accidents annually in Virginia. Each year, 15-20 cyclists are seriously injured by suddenly opened car doors in Richmond and Northern Virginia alone. Checking mirrors takes 2 seconds but prevents life-changing injuries.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Enforcement Reality:</strong> While obscure, these laws ARE enforced. Virginia State Police conduct "snow removal" enforcement blitzes after winter storms. Local police in horse country (Shenandoah Valley) actively enforce the no-honking law during tourist season.</span>
                    </li>
                </ul>
            </div>
            
            <div class="safety-insights" style="margin-top: 20px;">
                <h3 class="insights-title">
                    <span>üöó</span> Virginia-Specific Applications
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Horse Country Considerations:</strong> In areas like Lexington, Staunton, and the Shenandoah Valley, horse-drawn vehicles are common. The 3-foot passing law applies to them too. Amish and Mennonite communities rely on these protections for safety.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Urban vs. Rural Differences:</strong> In Northern Virginia, "dooring" and bicycle laws are frequently enforced. In rural areas, horse and farm equipment laws matter more. Snow removal laws are statewide but most enforced in mountainous regions.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Seasonal Awareness:</strong> Snow removal laws apply November-March. Horse laws are most relevant during tourist season (April-October). U-turn restrictions are year-round but more dangerous during foggy fall mornings in the Blue Ridge.</span>
                    </li>
                </ul>
            </div>
            
            <div class="safety-insights" style="margin-top: 20px;">
                <h3 class="insights-title">
                    <span>üìä</span> Enforcement & Statistics
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Dooring Statistics:</strong> Virginia sees 1,200+ "dooring" incidents annually, with 85% occurring in urban areas. Average medical cost: $15,000 per incident. Richmond leads with 300+ annually, mostly in The Fan and downtown.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Snow Removal Enforcement:</strong> After major snowstorms, Virginia State Police issue 500-800 snow removal citations. The "flying ice" hazard causes 50-75 accidents annually on I-81, I-66, and I-95.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Historical Prosecution:</strong> The most famous obscure law case in Virginia involved a $10,000 civil judgment against a driver who honked at a horse, causing it to bolt and injure its rider. The 1998 case set precedent for enhanced penalties.</span>
                    </li>
                </ul>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // State Management
            const state = {
                currentPart: 1,
                partsCompleted: 0,
                lawsDiscovered: 0,
                mythsBusted: 0,
                selectedCategory: 'driving',
                scenarioAnswers: {},
                quizAnswers: {},
                startedAt: new Date()
            };

            // Correct answers
            const correctAnswers = {
                scenario1: 'B', // Hazard lights, no honking
                scenario2: 'B', // Clear ALL snow
                quiz1: 'A',     // True - obstruction laws apply
                quiz2: 'B'      // 3 feet minimum
            };

            // DOM Elements
            const activityParts = document.querySelectorAll('#discovery-part, #scenario-part, #quiz-part');
            const lawCategories = document.querySelectorAll('.law-category');
            const lawCards = document.querySelectorAll('.law-card');
            const scenarioOptions = document.querySelectorAll('.scenario-option');
            const quizOptions = document.querySelectorAll('.quiz-option');
            const nextBtn = document.getElementById('next-part-btn');
            const resetBtn = document.getElementById('reset-btn');
            const completeBtn = document.getElementById('complete-btn');
            const resultsPanel = document.getElementById('results-panel');
            const finalScore = document.getElementById('final-score');
            const lawsDiscoveredEl = document.getElementById('laws-discovered');
            const mythsBustedEl = document.getElementById('myths-busted');
            const timeSpentEl = document.getElementById('time-spent');

            // Timer for time spent
            function updateTimer() {
                const now = new Date();
                const diff = Math.floor((now - state.startedAt) / 1000);
                const minutes = Math.floor(diff / 60);
                const seconds = diff % 60;
                timeSpentEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }

            setInterval(updateTimer, 1000);

            // Update progress steps
            function updateProgress() {
                const progressSteps = document.querySelectorAll('.progress-step');
                progressSteps.forEach((step, index) => {
                    if (state.currentPart === 1 && index === 0) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                        progressSteps[1].classList.remove('active', 'completed');
                        progressSteps[2].classList.remove('active', 'completed');
                    } else if (state.currentPart === 2 && index === 1) {
                        step.classList.add('active');
                        progressSteps[0].classList.add('completed');
                        progressSteps[0].classList.remove('active');
                        progressSteps[2].classList.remove('active', 'completed');
                    } else if (state.currentPart === 3 && index === 2) {
                        step.classList.add('active');
                        progressSteps[0].classList.add('completed');
                        progressSteps[1].classList.add('completed');
                        progressSteps[1].classList.remove('active');
                    }
                });
            }

            // Show/hide activity parts
            function showActivityPart(partNumber) {
                activityParts.forEach((part, index) => {
                    if (index === partNumber - 1) {
                        part.style.display = 'block';
                    } else {
                        part.style.display = 'none';
                    }
                });
            }

            // Part 1: Law Discovery
            function initDiscovery() {
                // Category selection
                lawCategories.forEach(category => {
                    category.addEventListener('click', function() {
                        const categoryType = this.dataset.category;
                        
                        // Update selection
                        lawCategories.forEach(cat => cat.classList.remove('selected'));
                        this.classList.add('selected');
                        state.selectedCategory = categoryType;
                        
                        // Show/hide law cards
                        lawCards.forEach(card => {
                            if (card.dataset.category === categoryType) {
                                card.style.display = 'block';
                                card.classList.add('selected');
                            } else {
                                card.style.display = 'none';
                                card.classList.remove('selected');
                            }
                        });
                        
                        // Update discovery count
                        const categoryCards = document.querySelectorAll(`.law-card[data-category="${categoryType}"]`);
                        state.lawsDiscovered = categoryCards.length;
                        lawsDiscoveredEl.textContent = state.lawsDiscovered;
                        
                        // Show feedback after first category selection
                        if (!state.partsCompleted) {
                            state.partsCompleted = 1;
                            setTimeout(() => {
                                document.getElementById('discovery-feedback').classList.add('show');
                                nextBtn.disabled = false;
                            }, 500);
                        }
                    });
                });
                
                // Law card interactions
                lawCards.forEach(card => {
                    card.addEventListener('click', function() {
                        this.classList.toggle('selected');
                        
                        // Count selected cards
                        const selectedCards = document.querySelectorAll('.law-card.selected').length;
                        lawsDiscoveredEl.textContent = selectedCards;
                    });
                });
                
                // Initialize with first category
                lawCategories[0].click();
            }

            // Part 2: Scenario Testing
            function initScenarios() {
                scenarioOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const scenario = this.dataset.scenario;
                        const selectedOption = this.dataset.option;
                        
                        // Remove selection from other options for same scenario
                        const allOptions = document.querySelectorAll(`[data-scenario="${scenario}"]`);
                        allOptions.forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
                        
                        // Select this option
                        this.classList.add('selected');
                        state.scenarioAnswers[scenario] = selectedOption;
                        
                        // Check if correct
                        const isCorrect = selectedOption === correctAnswers[`scenario${scenario}`];
                        
                        if (isCorrect) {
                            this.classList.add('correct');
                        } else {
                            this.classList.add('incorrect');
                            // Highlight correct answer
                            const correctOption = document.querySelector(`[data-scenario="${scenario}"][data-option="${correctAnswers[`scenario${scenario}`]}"]`);
                            if (correctOption) correctOption.classList.add('correct');
                        }
                        
                        // Check if both scenarios answered
                        if (Object.keys(state.scenarioAnswers).length === 2 && state.partsCompleted < 2) {
                            state.partsCompleted = 2;
                            state.mythsBusted = 2;
                            mythsBustedEl.textContent = state.mythsBusted;
                            
                            setTimeout(() => {
                                document.getElementById('scenario-feedback').classList.add('show');
                                nextBtn.disabled = false;
                            }, 500);
                        }
                    });
                });
            }

            // Part 3: Quiz
            function initQuiz() {
                quizOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const question = this.dataset.question;
                        const answer = this.dataset.option;
                        
                        // Remove selection from other options for same question
                        const allOptions = document.querySelectorAll(`[data-question="${question}"]`);
                        allOptions.forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
                        
                        // Select this option
                        this.classList.add('selected');
                        state.quizAnswers[question] = answer;
                        
                        // Check if correct
                        const isCorrect = answer === correctAnswers[`quiz${question}`];
                        
                        if (isCorrect) {
                            this.classList.add('correct');
                        } else {
                            this.classList.add('incorrect');
                            // Highlight correct answer
                            const correctOption = document.querySelector(`[data-question="${question}"][data-option="${correctAnswers[`quiz${question}`]}"]`);
                            if (correctOption) correctOption.classList.add('correct');
                        }
                        
                        // Check if all questions answered
                        if (Object.keys(state.quizAnswers).length === 2 && state.partsCompleted < 3) {
                            state.partsCompleted = 3;
                            state.mythsBusted += 2;
                            mythsBustedEl.textContent = state.mythsBusted;
                            
                            setTimeout(() => {
                                document.getElementById('quiz-feedback').classList.add('show');
                                completeBtn.disabled = false;
                            }, 500);
                        }
                    });
                });
            }

            // Next part button
            nextBtn.addEventListener('click', function() {
                if (state.currentPart < 3) {
                    // Show next part
                    state.currentPart++;
                    showActivityPart(state.currentPart);
                    
                    // Update progress
                    updateProgress();
                    
                    // Initialize next part
                    if (state.currentPart === 2) {
                        initScenarios();
                    } else if (state.currentPart === 3) {
                        initQuiz();
                    }
                    
                    // Update button text for last part
                    if (state.currentPart === 3) {
                        this.textContent = 'Complete Discovery';
                    }
                    
                    // Disable until interaction
                    this.disabled = true;
                }
            });

            // Complete lesson
            completeBtn.addEventListener('click', function() {
                // Calculate final score
                const totalCorrect = 
                    (state.scenarioAnswers['1'] === correctAnswers.scenario1 ? 1 : 0) +
                    (state.scenarioAnswers['2'] === correctAnswers.scenario2 ? 1 : 0) +
                    (state.quizAnswers['1'] === correctAnswers.quiz1 ? 1 : 0) +
                    (state.quizAnswers['2'] === correctAnswers.quiz2 ? 1 : 0);
                
                const score = Math.round((totalCorrect / 4) * 100);
                finalScore.textContent = `${score}%`;
                
                // Show results
                resultsPanel.classList.add('show');
                resultsPanel.scrollIntoView({ behavior: 'smooth' });
                
                // Update activity status
                document.querySelector('.activity-status').textContent = 'Completed';
                document.querySelector('.activity-status').style.color = '#10b981';
                document.getElementById('main-activity').classList.add('completed');
                
                // Update progress steps to completed
                const progressSteps = document.querySelectorAll('.progress-step');
                progressSteps.forEach(step => {
                    step.classList.add('completed');
                    step.classList.remove('active');
                });
            });

            // Reset lesson
            resetBtn.addEventListener('click', function() {
                // Reset state
                state.currentPart = 1;
                state.partsCompleted = 0;
                state.lawsDiscovered = 0;
                state.mythsBusted = 0;
                state.selectedCategory = 'driving';
                state.scenarioAnswers = {};
                state.quizAnswers = {};
                state.startedAt = new Date();
                
                // Show first part
                showActivityPart(1);
                
                // Reset UI
                lawCategories.forEach((category, index) => {
                    category.classList.toggle('selected', index === 0);
                });
                
                lawCards.forEach(card => {
                    card.style.display = 'block';
                    card.classList.remove('selected', 'correct', 'incorrect');
                });
                
                scenarioOptions.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                quizOptions.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                // Hide feedback
                document.querySelectorAll('.feedback-container').forEach(feedback => {
                    feedback.classList.remove('show');
                });
                
                // Reset buttons
                nextBtn.disabled = true;
                completeBtn.disabled = true;
                nextBtn.textContent = 'Next Section';
                resultsPanel.classList.remove('show');
                
                // Reset stats
                lawsDiscoveredEl.textContent = '0';
                mythsBustedEl.textContent = '0';
                
                // Reset activity status
                document.querySelector('.activity-status').textContent = 'In Progress';
                document.querySelector('.activity-status').style.color = '';
                document.getElementById('main-activity').classList.remove('completed');
                
                // Update progress and timer
                updateProgress();
                updateTimer();
                
                // Reinitialize
                initDiscovery();
            });

            // Initialize
            initDiscovery();
            updateTimer();
            updateProgress();
            showActivityPart(1);
        });
    </script>
</body>
</html>
