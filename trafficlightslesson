<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VA Driving Clinic - Traffic Control Essentials</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --color-primary: #5f17eb;
            --color-primary-light: #8a5feb;
            --color-secondary: #000000;
            --color-bg: #ffffff;
            --color-text: #000000;
            --color-muted: #6b7280;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --radius-lg: 20px;
            --radius-md: 12px;
            --radius-sm: 8px;
            --shadow-soft: 0 10px 30px rgba(95, 23, 235, 0.1);
            --shadow-hover: 0 15px 35px rgba(95, 23, 235, 0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            color: var(--color-text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(95, 23, 235, 0.5); }
            50% { box-shadow: 0 0 25px rgba(95, 23, 235, 0.8); }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .lesson-container {
            max-width: 1000px;
            margin: 0 auto;
            animation: fadeIn 0.6s ease-out;
        }

        /* Timer Styles */
        .timer-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            animation: fadeIn 0.5s ease-out;
        }

        .timer {
            background: linear-gradient(135deg, #5f17eb, #7c3aed);
            color: white;
            border-radius: 50px;
            padding: 15px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 8px 25px rgba(95, 23, 235, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.2);
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .timer.warning {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            animation: pulse 1s infinite;
        }

        .timer.critical {
            background: linear-gradient(135deg, #ef4444, #f87171);
            animation: blink 0.5s infinite;
        }

        .timer-icon {
            font-size: 1.3rem;
            animation: pulse 2s infinite;
        }

        .timer-display {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: 2px;
            min-width: 100px;
            text-align: center;
        }

        .timer-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Stats Display */
        .stats-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 600px) {
            .stats-display { grid-template-columns: 1fr; }
        }

        .stat-card {
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(95, 23, 235, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--color-primary);
            display: block;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--color-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-logo {
            height: 50px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .module-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .module-title {
            font-size: 1.1rem;
            color: var(--color-primary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .lesson-title {
            font-size: 2rem;
            font-weight: 800;
            color: var(--color-text);
            margin-bottom: 10px;
        }

        .time-estimate {
            background: rgba(95, 23, 235, 0.1);
            border: 2px solid rgba(95, 23, 235, 0.2);
            border-radius: var(--radius-md);
            padding: 15px 20px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .time-estimate-icon {
            font-size: 1.5rem;
            color: var(--color-primary);
        }

        .time-estimate-text {
            font-size: 1rem;
            color: var(--color-text);
            font-weight: 600;
        }

        .time-highlight {
            color: var(--color-primary);
            font-weight: 800;
            font-size: 1.2em;
        }

        .progress-indicator {
            margin: 20px 0 30px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(95, 23, 235, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #5f17eb, #7c3aed);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--color-muted);
            font-weight: 600;
        }

        .lesson-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .section {
            background: var(--color-bg);
            border-radius: var(--radius-lg);
            padding: 30px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(95, 23, 235, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: slideIn 0.5s ease-out;
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--color-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .section:hover::before {
            opacity: 1;
            animation: glow 2s infinite;
        }

        .section-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            font-weight: 800;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--color-text);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title-icon {
            font-size: 1.2rem;
        }

        .subsection {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(95, 23, 235, 0.1);
        }

        .subsection:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .subsection-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .subsection-content {
            color: var(--color-text);
            margin-bottom: 15px;
            line-height: 1.7;
        }

        .stats-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--color-error);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .stats-title {
            font-weight: 700;
            color: var(--color-error);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stats-content {
            color: var(--color-text);
            font-size: 0.95rem;
        }

        .tips-box {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid var(--color-success);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .tips-title {
            font-weight: 700;
            color: var(--color-success);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tips-list {
            list-style: none;
            padding-left: 0;
        }

        .tips-list li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .tips-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--color-success);
            font-weight: bold;
        }

        .signal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .signal-card {
            background: rgba(95, 23, 235, 0.05);
            border: 2px solid rgba(95, 23, 235, 0.1);
            border-radius: var(--radius-md);
            padding: 20px;
            transition: all 0.3s ease;
        }

        .signal-card:hover {
            border-color: var(--color-primary);
            transform: translateY(-3px);
        }

        .signal-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .signal-name {
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 5px;
        }

        .signal-meaning {
            color: var(--color-text);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .knowledge-check {
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 40px;
            border: 2px dashed rgba(95, 23, 235, 0.3);
        }

        .knowledge-title {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .quiz-question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(95, 23, 235, 0.1);
        }

        .quiz-question:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .question-text {
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 15px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 15px;
            background: white;
            border: 2px solid rgba(95, 23, 235, 0.2);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.05);
        }

        .option.selected {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            font-weight: 600;
        }

        .option-label {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: rgba(95, 23, 235, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--color-primary);
            flex-shrink: 0;
        }

        .option.selected .option-label {
            background: var(--color-primary);
            color: white;
        }

        .submit-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto 0;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .submit-btn:hover {
            background: #4c0fcf;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.3);
        }

        .submit-btn:disabled {
            background: var(--color-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results {
            display: none;
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-md);
            padding: 25px;
            margin-top: 25px;
            border-left: 4px solid var(--color-primary);
        }

        .results.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-title {
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--color-primary);
            margin: 20px 0;
            animation: pulse 2s infinite;
        }

        .feedback {
            color: var(--color-text);
            line-height: 1.7;
        }

        .key-points {
            background: rgba(16, 185, 129, 0.1);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-top: 30px;
        }

        .key-points-title {
            font-weight: 700;
            color: var(--color-success);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .key-points-list {
            list-style: none;
            padding-left: 0;
        }

        .key-points-list li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }

        .key-points-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 10px;
            color: var(--color-primary);
            font-size: 1.5rem;
            font-weight: bold;
        }

        .completion-message {
            display: none;
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-top: 30px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        .completion-message.show {
            display: block;
            animation: glow 2s infinite;
        }

        .completion-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .completion-time {
            font-size: 2.5rem;
            font-weight: 900;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .timer-container {
                position: static;
                margin-bottom: 20px;
            }

            .timer {
                justify-content: center;
            }

            .section {
                padding: 20px;
            }

            .lesson-title {
                font-size: 1.6rem;
            }

            .signal-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Timer Display -->
    <div class="timer-container">
        <div class="timer" id="timer">
            <div class="timer-icon">‚è±Ô∏è</div>
            <div class="timer-display" id="timer-display">00:00</div>
            <div class="timer-label">Time Learning</div>
        </div>
    </div>

    <div class="lesson-container">
        <!-- Header -->
        <div class="header">
            <div class="brand">
                <img src="https://lwfiles.mycourse.app/vadrivingclinic-public/9f5c6b8121721c8ef241f929fd983b3e.png" 
                     alt="VA Driving Clinic Logo" class="brand-logo">
                <div class="module-info">
                    <div class="module-title">Traffic Control Module</div>
                    <div style="color: var(--color-muted); font-size: 0.9rem;">5-Minute Essential Road Safety</div>
                </div>
            </div>
        </div>

        <h1 class="lesson-title">Traffic Control & Road Safety Essentials</h1>

        <!-- Time Estimate Banner -->
        <div class="time-estimate">
            <div class="time-estimate-icon">‚è±Ô∏è</div>
            <div class="time-estimate-text">
                Complete this lesson in approximately <span class="time-highlight">5 minutes</span> to master essential traffic control concepts
            </div>
        </div>

        <!-- Stats Display -->
        <div class="stats-display">
            <div class="stat-card">
                <span class="stat-number" id="completed-count">0</span>
                <span class="stat-label">Sections Completed</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="quiz-score">0%</span>
                <span class="stat-label">Quiz Score</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="time-spent">0:00</span>
                <span class="stat-label">Time Learning</span>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-indicator">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-label">
                <span>Lesson Progress</span>
                <span>Time Learning: <span id="time-learning">0:00</span></span>
            </div>
        </div>

        <!-- Lesson Content -->
        <div class="lesson-content">
            <!-- Section 1: Traffic Lights -->
            <div class="section" style="animation-delay: 0.1s" data-section="1">
                <div class="section-number">1</div>
                <h2 class="section-title">
                    <span class="section-title-icon">üö¶</span>
                    Traffic Lights: The Foundation of Intersection Safety
                </h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">
                        <span style="color: #10b981;">üü¢</span> Green Light
                    </h3>
                    <p class="subsection-content">
                        The green light indicates that drivers have the right to proceed through the intersection. 
                        However, always exercise caution and check both directions before entering, as not all drivers 
                        may comply with traffic laws.
                    </p>
                    
                    <div class="tips-box">
                        <div class="tips-title">üõ°Ô∏è Safety Tips</div>
                        <ul class="tips-list">
                            <li>Always ensure you can see where the front vehicle's rear tires meet the pavement</li>
                            <li>This allows an escape route if the vehicle behind you cannot stop in time</li>
                            <li>When waiting to turn left, keep your wheels straight to prevent being pushed into oncoming traffic if rear-ended</li>
                        </ul>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">
                        <span style="color: #f59e0b;">üü°</span> Yellow Light
                    </h3>
                    <p class="subsection-content">
                        When the traffic light turns yellow, it serves as a warning that the light is about to change 
                        to red. This signal indicates that drivers should prepare to stop if it is safe to do so.
                    </p>
                    <p class="subsection-content" style="font-weight: 600; color: var(--color-primary);">
                        ‚ö†Ô∏è Important: Entering an intersection while the light is yellow does not make it legal. 
                        The light must still be yellow as you exit the intersection.
                    </p>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">
                        <span style="color: #ef4444;">üî¥</span> Red Light
                    </h3>
                    <p class="subsection-content">
                        A red light signals that drivers must come to a complete stop and wait until the light 
                        turns green before proceeding through the intersection.
                    </p>
                    
                    <div class="stats-box">
                        <div class="stats-title">üìä Red Light Running Statistics (2024)</div>
                        <div class="stats-content">
                            ‚Ä¢ Over 1.8 million intersection crashes in the United States<br>
                            ‚Ä¢ Approximately 219,000 attributed to red light running<br>
                            ‚Ä¢ Led to around 1,000 fatalities and 181,000 injuries<br>
                            ‚Ä¢ On average, a motorist runs a red light every 20 minutes at busy intersections during rush hour
                        </div>
                    </div>

                    <p class="subsection-content" style="font-weight: 600;">
                        üí° Pro Tip: Some traffic lights have vehicle sensors. In Virginia, if a motorcycle isn't detected, 
                        riders may proceed with caution after waiting 120 seconds or two complete light cycles.
                    </p>
                </div>
            </div>

            <!-- Section 2: Advanced Features -->
            <div class="section" style="animation-delay: 0.2s" data-section="2">
                <div class="section-number">2</div>
                <h2 class="section-title">
                    <span class="section-title-icon">‚ú®</span>
                    Advanced Traffic Light Features
                </h2>

                <div class="signal-grid">
                    <div class="signal-card">
                        <div class="signal-icon">üü¢‚û°Ô∏è</div>
                        <div class="signal-name">Green Arrow</div>
                        <div class="signal-meaning">
                            You have the right of way to turn in the arrow's direction. Ensure your path is clear of pedestrians and oncoming vehicles.
                        </div>
                    </div>

                    <div class="signal-card">
                        <div class="signal-icon">üü°‚û°Ô∏è</div>
                        <div class="signal-name">Yellow Arrow</div>
                        <div class="signal-meaning">
                            Warning that the protected turn is ending. Prepare to stop unless too close to safely do so.
                        </div>
                    </div>

                    <div class="signal-card">
                        <div class="signal-icon">üî¥‚û°Ô∏è</div>
                        <div class="signal-name">Red Arrow</div>
                        <div class="signal-meaning">
                            Prohibits movement in the indicated direction. Wait until it turns green to proceed.
                        </div>
                    </div>

                    <div class="signal-card">
                        <div class="signal-icon">üî¥‚ö°</div>
                        <div class="signal-name">Flashing Red</div>
                        <div class="signal-meaning">
                            Functions like a stop sign. Come to a complete stop, check for traffic, then proceed when safe.
                        </div>
                    </div>

                    <div class="signal-card">
                        <div class="signal-icon">üü°‚ö°</div>
                        <div class="signal-name">Flashing Yellow</div>
                        <div class="signal-meaning">
                            Signals caution. Slow down and proceed through the intersection carefully.
                        </div>
                    </div>

                    <div class="signal-card">
                        <div class="signal-icon">üö∂‚Äç‚ôÇÔ∏è</div>
                        <div class="signal-name">Pedestrian Signals</div>
                        <div class="signal-meaning">
                            "Walk" means cross; flashing "Don't Walk" means finish crossing; solid "Don't Walk" means wait.
                        </div>
                    </div>
                </div>

                <div class="key-points">
                    <div class="key-points-title">üéØ Navigating Advanced Features Safely</div>
                    <ul class="key-points-list">
                        <li><strong>Stay Observant:</strong> Always scan for additional signals like arrows or flashing lights</li>
                        <li><strong>Plan Ahead:</strong> Anticipate changes in signals at complex intersections</li>
                        <li><strong>Yield When Required:</strong> Always yield to pedestrians and other vehicles when indicated</li>
                    </ul>
                </div>
            </div>

            <!-- Section 3: Specialized Signals -->
            <div class="section" style="animation-delay: 0.3s" data-section="3">
                <div class="section-number">3</div>
                <h2 class="section-title">
                    <span class="section-title-icon">üö∏</span>
                    Specialized Traffic Signals
                </h2>

                <div class="subsection">
                    <h3 class="subsection-title">üöÇ Railroad Crossing Signals</h3>
                    <p class="subsection-content">
                        <strong>Flashing Red Lights:</strong> Always stop when red lights flash at a railroad crossing. 
                        Wait until lights stop flashing and it's safe to proceed.<br><br>
                        <strong>Crossing Gates:</strong> Never drive around lowered gates. Wait for gates to fully lift.<br><br>
                        <strong>Audible Warnings:</strong> Train horns or bells accompany visual signals. Ensure tracks are clear before crossing.
                    </p>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">üè´ School Zone Signals</h3>
                    <p class="subsection-content">
                        <strong>Flashing Yellow Lights:</strong> Reduced speed limit is in effect. Obey posted limits during designated times.<br><br>
                        <strong>Crossing Guards:</strong> Always follow instructions of crossing guards for student safety.<br><br>
                        <strong>Special Signage:</strong> Look for signs indicating children, playgrounds, or school entrances.
                    </p>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">üöë Emergency Vehicle Signals</h3>
                    <p class="subsection-content">
                        <strong>Pre-emptive Traffic Lights:</strong> Some intersections change to green for emergency vehicles. Yield as necessary.<br><br>
                        <strong>Pulling Over:</strong> When an emergency vehicle approaches with flashing lights or sirens, 
                        pull over to the side of the road and stop until it passes.
                    </p>
                </div>

                <div class="key-points">
                    <div class="key-points-title">üõ°Ô∏è Specialized Signal Safety Principles</div>
                    <ul class="key-points-list">
                        <li><strong>Stay Patient:</strong> These signals are designed for safety - rushing leads to danger</li>
                        <li><strong>Observe Closely:</strong> Pay attention to all signals and accompanying signage</li>
                        <li><strong>Practice Caution:</strong> Always err on the side of safety at crossings and special areas</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Knowledge Check -->
        <div class="knowledge-check">
            <h2 class="knowledge-title">üìù Knowledge Check: Test Your Understanding</h2>
            
            <div class="quiz-question">
                <div class="question-text">1. What should you do when approaching a yellow traffic light?</div>
                <div class="options">
                    <div class="option" data-question="1" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Speed up to clear the intersection before it turns red</div>
                    </div>
                    <div class="option" data-question="1" data-answer="B">
                        <div class="option-label">B</div>
                        <div>Prepare to stop if it's safe to do so</div>
                    </div>
                    <div class="option" data-question="1" data-answer="C">
                        <div class="option-label">C</div>
                        <div>Continue at your current speed</div>
                    </div>
                </div>
            </div>

            <div class="quiz-question">
                <div class="question-text">2. If red lights are flashing at a railroad crossing, what should you do?</div>
                <div class="options">
                    <div class="option" data-question="2" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Slow down and look for trains</div>
                    </div>
                    <div class="option" data-question="2" data-answer="B">
                        <div class="option-label">B</div>
                        <div>Come to a complete stop and wait until lights stop flashing</div>
                    </div>
                    <div class="option" data-question="2" data-answer="C">
                        <div class="option-label">C</div>
                        <div>Proceed quickly if no train is visible</div>
                    </div>
                </div>
            </div>

            <div class="quiz-question">
                <div class="question-text">3. What does a flashing yellow traffic light mean?</div>
                <div class="options">
                    <div class="option" data-question="3" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Treat as a stop sign</div>
                    </div>
                    <div class="option" data-question="3" data-answer="B">
                        <div class="option-label">B</div>
                        <div>Proceed with caution</div>
                    </div>
                    <div class="option" data-question="3" data-answer="C">
                        <div class="option-label">C</div>
                        <div>The intersection is closed</div>
                    </div>
                </div>
            </div>

            <div class="quiz-question">
                <div class="question-text">4. When is it legal for a motorcycle to proceed at a traffic light that isn't detecting it?</div>
                <div class="options">
                    <div class="option" data-question="4" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Immediately if no traffic is visible</div>
                    </div>
                    <div class="option" data-question="4" data-answer="B">
                        <div class="option-label">B</div>
                        <div>After 120 seconds or two complete light cycles</div>
                    </div>
                    <div class="option" data-question="4" data-answer="C">
                        <div class="option-label">C</div>
                        <div>When you flash your high beams</div>
                    </div>
                </div>
            </div>

            <button class="submit-btn" id="submit-btn" onclick="checkAnswers()">Check Your Answers</button>

            <div class="results" id="results">
                <div class="results-title">
                    <span>üìä</span> Your Results
                </div>
                <div class="score" id="score">0/4</div>
                <div class="feedback" id="feedback">
                    Review your answers below to see which concepts you've mastered and which need more attention.
                </div>
                <div class="key-points" style="margin-top: 20px;">
                    <div class="key-points-title">üéØ Key Takeaways from This Lesson</div>
                    <ul class="key-points-list">
                        <li>Traffic control systems prevent over 1.8 million intersection crashes annually</li>
                        <li>Understanding signal meanings reduces confusion and improves reaction time</li>
                        <li>Specialized signals address unique safety scenarios requiring extra attention</li>
                        <li>Always yield to pedestrians and emergency vehicles as indicated by signals</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Completion Message -->
        <div class="completion-message" id="completion-message">
            <div class="completion-title">
                <span>üéâ</span> Lesson Completed!
            </div>
            <p>You've successfully completed the Traffic Control Essentials lesson.</p>
            <div class="completion-time" id="completion-time">00:00</div>
            <p>Review the key points and statistics to reinforce your learning. Safe driving starts with understanding traffic control systems.</p>
        </div>
    </div>

    <script>
        // Timer Configuration - Continuous timer like in interact file
        let timerInterval;
        let totalSeconds = 0;
        let sectionsCompleted = new Set();
        let quizCompleted = false;
        
        // DOM Elements
        const timerDisplay = document.getElementById('timer-display');
        const timeSpentEl = document.getElementById('time-spent');
        const timeLearningSpan = document.getElementById('time-learning');
        const completedCountEl = document.getElementById('completed-count');
        const quizScoreEl = document.getElementById('quiz-score');
        const progressFill = document.getElementById('progress-fill');
        const submitBtn = document.getElementById('submit-btn');
        const completionMessage = document.getElementById('completion-message');
        const completionTime = document.getElementById('completion-time');

        // Format time as MM:SS or HH:MM:SS
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            if (hours > 0) {
                return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            } else {
                return `${minutes}:${secs.toString().padStart(2, '0')}`;
            }
        }

        // Start the continuous timer
        function startTimer() {
            // Clear any existing interval
            if (timerInterval) clearInterval(timerInterval);
            
            // Start new interval
            timerInterval = setInterval(function() {
                totalSeconds++;
                updateTimerDisplay();
            }, 1000);
        }

        // Update timer display across all elements
        function updateTimerDisplay() {
            const timeString = formatTime(totalSeconds);
            
            // Update all timer displays
            timerDisplay.textContent = timeString;
            timeSpentEl.textContent = timeString;
            timeLearningSpan.textContent = timeString;
            
            // Update progress based on sections read
            updateProgress();
        }

        // Update progress based on sections read
        function updateProgress() {
            const totalSections = 3; // We have 3 main sections
            const progressPercentage = Math.min((sectionsCompleted.size / totalSections) * 100, 100);
            progressFill.style.width = `${progressPercentage}%`;
            
            // Update completed count
            completedCountEl.textContent = sectionsCompleted.size;
            
            // Update timer appearance based on time
            const timerElement = document.getElementById('timer');
            if (totalSeconds >= 300) { // 5 minutes or more
                timerElement.classList.add('warning');
                timerElement.classList.remove('critical');
            } else if (totalSeconds >= 600) { // 10 minutes or more
                timerElement.classList.add('critical');
                timerElement.classList.remove('warning');
            } else {
                timerElement.classList.remove('warning', 'critical');
            }
        }

        // Update quiz score display
        function updateQuizScore(score, totalQuestions) {
            const percentage = Math.round((score / totalQuestions) * 100);
            quizScoreEl.textContent = `${percentage}%`;
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Start the continuous timer
            startTimer();
            
            // Set up option selection
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.dataset.question;
                    // Remove selected class from all options in this question
                    document.querySelectorAll(`.option[data-question="${question}"]`)
                        .forEach(opt => opt.classList.remove('selected'));
                    // Add selected class to clicked option
                    this.classList.add('selected');
                });
            });

            // Track section reading progress
            const sections = document.querySelectorAll('.section');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionNumber = entry.target.dataset.section;
                        if (!sectionsCompleted.has(sectionNumber)) {
                            sectionsCompleted.add(sectionNumber);
                            updateProgress();
                        }
                    }
                });
            }, { threshold: 0.5 });
            
            sections.forEach(section => observer.observe(section));
        });

        function checkAnswers() {
            // Mark quiz as completed
            quizCompleted = true;
            
            const correctAnswers = {
                1: 'B',
                2: 'B',
                3: 'B',
                4: 'B'
            };

            let score = 0;
            const totalQuestions = 4;
            let feedbackHTML = '';

            // Check each question
            for (let i = 1; i <= totalQuestions; i++) {
                const selectedOption = document.querySelector(`.option.selected[data-question="${i}"]`);
                if (selectedOption) {
                    const userAnswer = selectedOption.dataset.answer;
                    const isCorrect = userAnswer === correctAnswers[i];
                    
                    if (isCorrect) {
                        score++;
                        selectedOption.style.borderColor = '#10b981';
                        selectedOption.style.background = 'rgba(16, 185, 129, 0.1)';
                    } else {
                        selectedOption.style.borderColor = '#ef4444';
                        selectedOption.style.background = 'rgba(239, 68, 68, 0.1)';
                        
                        // Highlight correct answer
                        const correctOption = document.querySelector(`.option[data-question="${i}"][data-answer="${correctAnswers[i]}"]`);
                        if (correctOption) {
                            correctOption.style.borderColor = '#10b981';
                            correctOption.style.background = 'rgba(16, 185, 129, 0.1)';
                            correctOption.style.fontWeight = '600';
                        }
                    }
                }
            }

            // Update quiz score
            updateQuizScore(score, totalQuestions);
            
            // Calculate percentage
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Show results
            document.getElementById('score').textContent = `${score}/${totalQuestions} (${percentage}%)`;
            
            // Generate feedback based on score
            if (score === totalQuestions) {
                feedbackHTML = 'üéâ Excellent! You\'ve mastered the essential traffic control concepts. ';
            } else if (score >= totalQuestions * 0.7) {
                feedbackHTML = 'üëç Good job! You understand most concepts. Review the incorrect answers to strengthen your knowledge. ';
            } else {
                feedbackHTML = 'üìö Review the lesson material and try again. Understanding these concepts is crucial for road safety. ';
            }
            
            feedbackHTML += 'Remember these key points:';
            document.getElementById('feedback').innerHTML = feedbackHTML;
            
            // Show results
            document.getElementById('results').classList.add('show');
            
            // Show completion message
            completionTime.textContent = formatTime(totalSeconds);
            completionMessage.classList.add('show');
            
            // Update timer to show "Completed" state
            timerDisplay.textContent = formatTime(totalSeconds);
            const timerElement = document.getElementById('timer');
            timerElement.style.background = 'linear-gradient(135deg, #10b981, #34d399)';
            
            // Update progress bar to 100%
            progressFill.style.width = '100%';
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Optional: Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !quizCompleted) {
                checkAnswers();
            }
        });
    </script>
</body>
</html>
