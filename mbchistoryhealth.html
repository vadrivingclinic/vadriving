<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>History of Health Insurance in the United States</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --color-primary: #af4bef;
            --color-primary-light: #d492ff;
            --color-accent: #8380f0;
            --color-success: #00b894;
            --color-warning: #fdcb6e;
            --color-error: #e17055;
            --color-bg-light: #f7f5fb;
            --color-bg-gradient: linear-gradient(to bottom, white, #f1ecff, #f7f5fb);
            --color-text: #333333;
            --color-muted: #666666;
            --radius-lg: 20px;
            --radius-md: 12px;
            --radius-sm: 8px;
            --shadow-soft: 0 10px 30px rgba(175, 75, 239, 0.1);
            --shadow-hover: 0 15px 35px rgba(175, 75, 239, 0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-bg-gradient);
            color: var(--color-text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .lesson-container {
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 0.6s ease-out;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-logo {
            height: 50px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .module-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .module-title {
            font-size: 1.1rem;
            color: var(--color-primary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .lesson-title {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .lesson-subtitle {
            font-size: 1.3rem;
            color: var(--color-text);
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* Stats Display */
        .stats-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .stats-display {
                grid-template-columns: 1fr;
            }
        }

        .stat-card {
            background: rgba(175, 75, 239, 0.05);
            border-radius: var(--radius-md);
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(175, 75, 239, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(175, 75, 239, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--color-primary);
            display: block;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--color-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        /* Progress Indicator */
        .progress-indicator {
            margin: 30px 0;
        }

        .progress-bar {
            height: 8px;
            background: rgba(175, 75, 239, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--color-muted);
            font-weight: 600;
        }

        /* Content Sections */
        .content-sections {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }

        .content-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 40px;
            box-shadow: var(--shadow-soft);
            animation: fadeIn 0.5s ease-out;
            position: relative;
            overflow: hidden;
        }

        .content-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--color-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .content-section:hover::before {
            opacity: 1;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(175, 75, 239, 0.1);
        }

        .section-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            flex-shrink: 0;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--color-primary);
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: var(--color-muted);
            font-weight: 600;
        }

        /* Learning Concepts */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .concept-card {
            background: rgba(175, 75, 239, 0.05);
            border-radius: var(--radius-md);
            padding: 25px;
            border: 2px solid rgba(175, 75, 239, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: var(--shadow-soft);
        }

        .concept-number {
            position: absolute;
            top: -15px;
            left: 20px;
            width: 30px;
            height: 30px;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.9rem;
        }

        .concept-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .concept-content {
            color: var(--color-text);
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .key-points {
            background: rgba(0, 184, 148, 0.1);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-top: 20px;
        }

        .key-points-title {
            font-weight: 700;
            color: var(--color-success);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .key-points-list {
            list-style: none;
            padding-left: 0;
        }

        .key-points-list li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .key-points-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--color-success);
            font-weight: bold;
        }

        /* ACA Timeline */
        .aca-timeline {
            background: linear-gradient(135deg, rgba(175, 75, 239, 0.05), rgba(131, 128, 240, 0.05));
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 30px;
        }

        .timeline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .timeline-item {
            background: white;
            border-radius: var(--radius-md);
            padding: 20px;
            border-left: 4px solid var(--color-primary);
        }

        .timeline-year {
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .timeline-content {
            color: var(--color-text);
            line-height: 1.6;
        }

        /* Insurance Types Grid */
        .insurance-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .insurance-type-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 25px;
            border: 2px solid rgba(175, 75, 239, 0.1);
            transition: all 0.3s ease;
        }

        .insurance-type-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: var(--shadow-soft);
        }

        .insurance-icon {
            width: 50px;
            height: 50px;
            background: var(--color-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 15px;
        }

        .insurance-name {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .insurance-description {
            color: var(--color-text);
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Key Terms Section */
        .key-terms-section {
            background: rgba(131, 128, 240, 0.1);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 30px;
        }

        .key-terms-title {
            font-weight: 800;
            color: var(--color-accent);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .terms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .term-item {
            background: white;
            border-radius: var(--radius-sm);
            padding: 15px;
            border-left: 3px solid var(--color-accent);
        }

        .term-name {
            font-weight: 700;
            color: var(--color-accent);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .term-definition {
            color: var(--color-text);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Enhanced Flash Cards */
        .flashcards-section {
            background: linear-gradient(135deg, rgba(175, 75, 239, 0.05), rgba(131, 128, 240, 0.05));
            border-radius: var(--radius-lg);
            padding: 40px;
            margin-top: 40px;
            border: 2px dashed rgba(175, 75, 239, 0.3);
        }

        .flashcards-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .flashcards-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .flashcards-subtitle {
            color: var(--color-muted);
            font-size: 1.1rem;
        }

        .flashcards-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .flashcard-display {
            perspective: 1000px;
            height: 350px;
            margin-bottom: 30px;
        }

        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: var(--radius-lg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
        }

        .flashcard-front {
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
            color: white;
            text-align: center;
        }

        .flashcard-back {
            background: white;
            color: var(--color-text);
            transform: rotateY(180deg);
            box-shadow: var(--shadow-soft);
            border: 2px solid rgba(175, 75, 239, 0.1);
        }

        .flashcard-term {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .flashcard-category {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .flashcard-hint {
            font-size: 1rem;
            margin-top: 20px;
            opacity: 0.8;
        }

        .flashcard-definition {
            font-size: 1.3rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .flashcard-context {
            background: rgba(175, 75, 239, 0.05);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-top: 20px;
            font-size: 1rem;
            line-height: 1.6;
        }

        .flashcard-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .flashcard-btn {
            padding: 12px 30px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .flashcard-btn:hover {
            background: #8c3ac7;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(175, 75, 239, 0.3);
        }

        .flashcard-btn:disabled {
            background: var(--color-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .flashcard-progress {
            font-size: 1rem;
            color: var(--color-muted);
            font-weight: 600;
        }

        .mastery-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 184, 148, 0.1);
            color: var(--color-success);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 700;
            margin-left: 10px;
        }

        /* Knowledge Check */
        .knowledge-check {
            background: rgba(175, 75, 239, 0.05);
            border-radius: var(--radius-lg);
            padding: 40px;
            margin-top: 50px;
        }

        .knowledge-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 30px;
            text-align: center;
        }

        .question-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-soft);
        }

        .question-text {
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .question-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .question-option {
            padding: 15px;
            background: rgba(175, 75, 239, 0.05);
            border: 2px solid rgba(175, 75, 239, 0.2);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .question-option:hover {
            border-color: var(--color-primary);
            background: rgba(175, 75, 239, 0.1);
        }

        .question-option.selected {
            border-color: var(--color-primary);
            background: rgba(175, 75, 239, 0.15);
            font-weight: 600;
        }

        .option-label {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(175, 75, 239, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--color-primary);
            flex-shrink: 0;
        }

        .question-option.selected .option-label {
            background: var(--color-primary);
            color: white;
        }

        .submit-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto 0;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .submit-btn:hover {
            background: #8c3ac7;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(175, 75, 239, 0.3);
        }

        .results-panel {
            display: none;
            background: white;
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 30px;
            box-shadow: var(--shadow-soft);
            border-top: 4px solid var(--color-primary);
        }

        .results-panel.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .results-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .score-display {
            font-size: 3rem;
            font-weight: 900;
            color: var(--color-primary);
            margin: 20px 0;
        }

        .feedback-message {
            color: var(--color-text);
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* Completion Section */
        .completion-section {
            background: linear-gradient(135deg, var(--color-success), #26d7ab);
            color: white;
            border-radius: var(--radius-lg);
            padding: 40px;
            margin-top: 50px;
            text-align: center;
            display: none;
        }

        .completion-section.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .completion-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .completion-message {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .content-section {
                padding: 25px;
            }

            .lesson-title {
                font-size: 1.8rem;
            }

            .lesson-subtitle {
                font-size: 1.1rem;
            }

            .concepts-grid {
                grid-template-columns: 1fr;
            }

            .insurance-types-grid {
                grid-template-columns: 1fr;
            }

            .flashcard-display {
                height: 400px;
            }

            .flashcard-front, .flashcard-back {
                padding: 25px;
            }

            .flashcard-term {
                font-size: 1.8rem;
            }

            .flashcard-definition {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="lesson-container">
        <!-- Header -->
        <div class="header">
            <div class="brand">
                <img src="https://cdn.prod.website-files.com/64d0ccc1558d601cbfb09021/64e9d2f719b1e5258e5d57f5_IMG_1512-p-500.png" 
                     alt="Brand Logo" class="brand-logo">
                <div class="module-info">
                    <div class="module-title">Healthcare Insurance History</div>
                    <div style="color: var(--color-muted); font-size: 0.9rem;">From Origins to Modern Reform</div>
                </div>
            </div>
        </div>

        <h1 class="lesson-title">History of Health Insurance in the United States</h1>
        <div class="lesson-subtitle">Understanding the Evolution, Reforms, and Modern Healthcare System</div>

        <!-- Stats Display -->
        <div class="stats-display">
            <div class="stat-card">
                <span class="stat-number" id="completed-count">0</span>
                <span class="stat-label">Concepts Mastered</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="flashcards-mastered">0</span>
                <span class="stat-label">Flash Cards Studied</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="quiz-score">0%</span>
                <span class="stat-label">Quiz Score</span>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-indicator">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-label">
                <span>Learning Progress</span>
                <span><span id="progress-percentage">0%</span> Complete</span>
            </div>
        </div>

        <!-- Content Sections -->
        <div class="content-sections">
            <!-- Section 1: Historical Origins -->
            <div class="content-section">
                <div class="section-header">
                    <div class="section-icon">üìú</div>
                    <div>
                        <h2 class="section-title">Historical Origins (1850s-1920s)</h2>
                        <div class="section-subtitle">The Foundation of American Health Insurance</div>
                    </div>
                </div>

                <div class="concepts-grid">
                    <div class="concept-card">
                        <div class="concept-number">1</div>
                        <div class="concept-title">üèõÔ∏è Franklin Health Assurance (1850s)</div>
                        <div class="concept-content">
                            The Franklin Health Assurance Company of Massachusetts pioneered health insurance by offering coverage specifically for non-fatal injuries. This marked the beginning of formal health insurance in the United States, focusing initially on accident coverage rather than illness.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Key Historical Significance</div>
                            <ul class="key-points-list">
                                <li>First formal health insurance company in the US</li>
                                <li>Focused exclusively on accident coverage</li>
                                <li>Established the insurance model for future companies</li>
                                <li>Operated on a commercial insurance principle</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-number">2</div>
                        <div class="concept-title">‚úàÔ∏è Travelers Insurance (1860s)</div>
                        <div class="concept-content">
                            Travelers Insurance Company of Hartford introduced a more comprehensive plan resembling modern health insurance. This represented a significant evolution from simple accident coverage to broader health protection, including illness coverage.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Key Innovations</div>
                            <ul class="key-points-list">
                                <li>Expanded beyond accident-only coverage</li>
                                <li>Introduced more comprehensive health protection</li>
                                <li>Set precedent for modern insurance plans</li>
                                <li>Increased competition in insurance market</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-number">3</div>
                        <div class="concept-title">üë• First Group Plan (1911)</div>
                        <div class="concept-content">
                            Montgomery Ward and Company offered the first group health insurance plan to its employees, creating the employer-sponsored insurance model that would dominate American healthcare for decades.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ System Impact</div>
                            <ul class="key-points-list">
                                <li>Created employer-sponsored insurance model</li>
                                <li>Provided coverage for illness and injury</li>
                                <li>Established group purchasing power concept</li>
                                <li>Led to widespread employer adoption</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Blue Cross/Shield & WWII Impact -->
            <div class="content-section">
                <div class="section-header">
                    <div class="section-icon">üè•</div>
                    <div>
                        <h2 class="section-title">System Development (1929-1960s)</h2>
                        <div class="section-subtitle">Blue Cross/Shield Emergence and Government Programs</div>
                    </div>
                </div>

                <div class="concepts-grid">
                    <div class="concept-card">
                        <div class="concept-number">4</div>
                        <div class="concept-title">üíô Blue Cross Foundation (1929)</div>
                        <div class="concept-content">
                            Baylor Hospital in Dallas created a prepaid hospital plan for teachers, which evolved into Blue Cross. This innovative approach helped people pay hospital bills during the Great Depression and established the non-profit insurance model.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ System Innovations</div>
                            <ul class="key-points-list">
                                <li>Introduced prepaid hospital coverage</li>
                                <li>Established non-profit insurance model</li>
                                <li>Created community-rated premiums</li>
                                <li>Focused on hospital cost coverage</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-number">5</div>
                        <div class="concept-title">üõ°Ô∏è Blue Shield Emergence (1939)</div>
                        <div class="concept-content">
                            Blue Shield developed as physicians sought payment security for their services. While Blue Cross covered hospital costs, Blue Shield focused on physician services, creating a comprehensive coverage system.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Physician Coverage</div>
                            <ul class="key-points-list">
                                <li>Covered physician services and fees</li>
                                <li>Created by doctors to ensure payment</li>
                                <li>Complemented Blue Cross hospital coverage</li>
                                <li>Established physician network concept</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-number">6</div>
                        <div class="concept-title">‚öîÔ∏è WWII Labor Impact (1940s)</div>
                        <div class="concept-content">
                            Wartime wage freezes led employers to offer health insurance as a benefit to attract workers. This solidified the employer-based system and expanded health insurance coverage dramatically across the workforce.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Economic Impact</div>
                            <ul class="key-points-list">
                                <li>Wage controls led to benefit competition</li>
                                <li>Employer-sponsored insurance became standard</li>
                                <li>Tax advantages for employer contributions</li>
                                <li>Massive expansion of insured population</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Government Programs & Managed Care -->
            <div class="content-section">
                <div class="section-header">
                    <div class="section-icon">üá∫üá∏</div>
                    <div>
                        <h2 class="section-title">Government Intervention & Reform (1965-1990s)</h2>
                        <div class="section-subtitle">Medicare/Medicaid Creation and Cost Containment</div>
                    </div>
                </div>

                <div class="concepts-grid">
                    <div class="concept-card">
                        <div class="concept-number">7</div>
                        <div class="concept-title">üëµ Medicare & Medicaid (1965)</div>
                        <div class="concept-content">
                            Federal legislation established Medicare for the elderly and Medicaid for the poor. These government programs represented the largest expansion of healthcare coverage in American history.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Government Role</div>
                            <ul class="key-points-list">
                                <li>Medicare: Federal program for elderly (65+)</li>
                                <li>Medicaid: Joint federal-state program for low-income</li>
                                <li>Largest coverage expansion in US history</li>
                                <li>Established government as major payer</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-number">8</div>
                        <div class="concept-title">üí∞ Cost Escalation (1970s-80s)</div>
                        <div class="concept-content">
                            Healthcare costs began rising rapidly due to new technologies, increased utilization, expanded benefits, and aging population. This led to serious discussions about healthcare cost containment.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Cost Drivers</div>
                            <ul class="key-points-list">
                                <li>Medical technology advancements</li>
                                <li>Increased service utilization</li>
                                <li>Aging population demands</li>
                                <li>Expanded insurance benefits</li>
                                <li>Administrative complexity growth</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-number">9</div>
                        <div class="concept-title">üîÑ Managed Care Emergence (1980s-90s)</div>
                        <div class="concept-content">
                            Insurance companies adopted managed care principles from Kaiser's prepaid model. HMOs, PPOs, and other managed care organizations grew to control rising healthcare costs through provider networks and utilization review.
                        </div>
                        <div class="key-points">
                            <div class="key-points-title">üéØ Cost Containment</div>
                            <ul class="key-points-list">
                                <li>Provider network restrictions</li>
                                <li>Utilization review requirements</li>
                                <li>Primary care gatekeeping</li>
                                <li>Preventive care emphasis</li>
                                <li>Negotiated provider rates</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Affordable Care Act -->
            <div class="content-section">
                <div class="section-header">
                    <div class="section-icon">üèõÔ∏è</div>
                    <div>
                        <h2 class="section-title">Affordable Care Act (2010-Present)</h2>
                        <div class="section-subtitle">Comprehensive Healthcare Reform and Implementation</div>
                    </div>
                </div>

                <div class="aca-timeline">
                    <div style="font-weight: 800; color: var(--color-primary); margin-bottom: 20px; font-size: 1.2rem;">
                        üìÖ Key Implementation Timeline
                    </div>
                    
                    <div class="timeline-grid">
                        <div class="timeline-item">
                            <div class="timeline-year">2010</div>
                            <div class="timeline-content">
                                ‚Ä¢ Prohibits denial for children with preexisting conditions<br>
                                ‚Ä¢ Eliminates lifetime limits on benefits<br>
                                ‚Ä¢ Young adults can stay on parents' plan until age 26<br>
                                ‚Ä¢ Establishes Prevention and Public Health Fund
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-year">2014</div>
                            <div class="timeline-content">
                                ‚Ä¢ Individual mandate takes effect<br>
                                ‚Ä¢ Health insurance exchanges open<br>
                                ‚Ä¢ Prohibits discrimination for preexisting conditions<br>
                                ‚Ä¢ Medicaid expansion in participating states<br>
                                ‚Ä¢ Provides premium tax credits
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-year">2020</div>
                            <div class="timeline-content">
                                ‚Ä¢ Eliminates Medicare Part D coverage gap<br>
                                ‚Ä¢ Fully implements payment reforms<br>
                                ‚Ä¢ Expands value-based care initiatives<br>
                                ‚Ä¢ Continues coverage expansion efforts<br>
                                ‚Ä¢ Enhances quality measurement systems
                            </div>
                        </div>
                    </div>
                </div>

                <div class="key-terms-section">
                    <div class="key-terms-title">üìö Key ACA Concepts</div>
                    <div class="terms-grid">
                        <div class="term-item">
                            <div class="term-name">Individual Mandate</div>
                            <div class="term-definition">Requirement that most Americans have health insurance or pay a penalty (upheld as constitutional tax by Supreme Court in 2012)</div>
                        </div>
                        <div class="term-item">
                            <div class="term-name">Health Insurance Exchange</div>
                            <div class="term-definition">Marketplace where individuals and small businesses can compare and purchase qualified health insurance plans</div>
                        </div>
                        <div class="term-item">
                            <div class="term-name">Essential Health Benefits</div>
                            <div class="term-definition">Minimum coverage requirements including hospitalization, prescription drugs, maternity care, and preventive services</div>
                        </div>
                        <div class="term-item">
                            <div class="term-name">Medicaid Expansion</div>
                            <div class="term-definition">ACA provision allowing states to expand Medicaid coverage to adults with incomes up to 138% of federal poverty level</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Insurance Types -->
            <div class="content-section">
                <div class="section-header">
                    <div class="section-icon">üìã</div>
                    <div>
                        <h2 class="section-title">Types of Health Insurance Coverage</h2>
                        <div class="section-subtitle">Understanding Different Insurance Models and Structures</div>
                    </div>
                </div>

                <div class="insurance-types-grid">
                    <div class="insurance-type-card">
                        <div class="insurance-icon">üíº</div>
                        <div class="insurance-name">Traditional (Indemnity) Insurance</div>
                        <div class="insurance-description">
                            Fee-for-service plans offering maximum provider choice. Patients pay premiums, deductibles, and coinsurance for covered services without network restrictions.
                        </div>
                    </div>

                    <div class="insurance-type-card">
                        <div class="insurance-icon">üë•</div>
                        <div class="insurance-name">Health Maintenance Organization (HMO)</div>
                        <div class="insurance-description">
                            Prepaid plans emphasizing preventive care with restricted provider networks, primary care physician gatekeeping, and lower out-of-pocket costs.
                        </div>
                    </div>

                    <div class="insurance-type-card">
                        <div class="insurance-icon">üè•</div>
                        <div class="insurance-name">Preferred Provider Organization (PPO)</div>
                        <div class="insurance-description">
                            Network-based plans offering flexibility to see out-of-network providers at higher costs. No referral requirements but higher premiums than HMOs.
                        </div>
                    </div>

                    <div class="insurance-type-card">
                        <div class="insurance-icon">üìç</div>
                        <div class="insurance-name">Point of Service (POS)</div>
                        <div class="insurance-description">
                            Hybrid plans combining HMO and PPO features. Primary care coordination with out-of-network options and tiered cost structures.
                        </div>
                    </div>

                    <div class="insurance-type-card">
                        <div class="insurance-icon">üí∞</div>
                        <div class="insurance-name">High Deductible Health Plan (HDHP) with HSA</div>
                        <div class="insurance-description">
                            Plans with high deductibles paired with tax-advantaged Health Savings Accounts for medical expenses. Lower premiums but higher out-of-pocket costs.
                        </div>
                    </div>

                    <div class="insurance-type-card">
                        <div class="insurance-icon">üá∫üá∏</div>
                        <div class="insurance-name">Government Programs</div>
                        <div class="insurance-description">
                            Medicare (elderly/disabled), Medicaid (low-income), TRICARE (military), CHAMPVA (veterans), and other federal/state programs serving specific populations.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Flash Cards Section -->
        <div class="flashcards-section">
            <div class="flashcards-header">
                <div class="flashcards-title">üìö Key Terminology Flash Cards</div>
                <div class="flashcards-subtitle">Study essential healthcare insurance concepts with detailed explanations</div>
            </div>

            <div class="flashcards-container">
                <div class="flashcard-display">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="flashcard-front">
                            <div class="flashcard-category">Insurance Fundamentals</div>
                            <div class="flashcard-term" id="card-term">Health Insurance</div>
                            <div class="flashcard-hint">Click card to flip for detailed explanation</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="flashcard-definition" id="card-definition">
                                A contract between a policyholder and a third-party payer or government program to reimburse the policyholder for all or a portion of the cost of medical and/or preventive care on the basis of the contract purchased.
                            </div>
                            <div class="flashcard-context" id="card-context">
                                <strong>Historical Context:</strong> Originated in mid-1800s with Franklin Health Assurance Company offering non-fatal injury coverage. Evolved from simple accident insurance to comprehensive health protection.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flashcard-controls">
                    <button class="flashcard-btn" id="prev-btn" onclick="prevCard()" disabled>‚Üê Previous</button>
                    
                    <div class="flashcard-progress">
                        Card <span id="current-card">1</span> of <span id="total-cards">15</span>
                        <span class="mastery-badge" id="mastery-badge">üìö Learning</span>
                    </div>
                    
                    <button class="flashcard-btn" id="next-btn" onclick="nextCard()">Next ‚Üí</button>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="flashcard-btn" onclick="markMastered()" style="background: var(--color-success);">
                        ‚úÖ Mark as Mastered
                    </button>
                    <button class="flashcard-btn" onclick="shuffleCards()" style="background: var(--color-accent); margin-left: 10px;">
                        üîÄ Shuffle Cards
                    </button>
                </div>
            </div>
        </div>

        <!-- Knowledge Check -->
        <div class="knowledge-check">
            <h2 class="knowledge-title">üìù Knowledge Assessment</h2>
            
            <!-- Question 1 -->
            <div class="question-card">
                <div class="question-text">1. What was the primary significance of Montgomery Ward's 1911 health insurance plan?</div>
                <div class="question-options">
                    <div class="question-option" data-question="1" data-answer="A">
                        <div class="option-label">A</div>
                        <div>It established the first employer-sponsored group health insurance plan</div>
                    </div>
                    <div class="question-option" data-question="1" data-answer="B">
                        <div class="option-label">B</div>
                        <div>It introduced Medicare coverage for elderly employees</div>
                    </div>
                    <div class="question-option" data-question="1" data-answer="C">
                        <div class="option-label">C</div>
                        <div>It created the first health insurance exchange marketplace</div>
                    </div>
                    <div class="question-option" data-question="1" data-answer="D">
                        <div class="option-label">D</div>
                        <div>It was the first insurance plan to cover preexisting conditions</div>
                    </div>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="question-card">
                <div class="question-text">2. How did World War II impact the growth of employer-sponsored health insurance?</div>
                <div class="question-options">
                    <div class="question-option" data-question="2" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Wage freezes led employers to offer health benefits as compensation</div>
                    </div>
                    <div class="question-option" data-question="2" data-answer="B">
                        <div class="option-label">B</div>
                        <div>The government mandated employer health coverage for all workers</div>
                    </div>
                    <div class="question-option" data-question="2" data-answer="C">
                        <div class="option-label">C</div>
                        <div>Military contracts required defense contractors to provide insurance</div>
                    </div>
                    <div class="question-option" data-question="2" data-answer="D">
                        <div class="option-label">D</div>
                        <div>Returning veterans demanded healthcare benefits in employment</div>
                    </div>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-card">
                <div class="question-text">3. What is the key difference between Blue Cross and Blue Shield in their historical development?</div>
                <div class="question-options">
                    <div class="question-option" data-question="3" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Blue Cross covered hospital costs, Blue Shield covered physician services</div>
                    </div>
                    <div class="question-option" data-question="3" data-answer="B">
                        <div class="option-label">B</div>
                        <div>Blue Cross was for-profit, Blue Shield was non-profit</div>
                    </div>
                    <div class="question-option" data-question="3" data-answer="C">
                        <div class="option-label">C</div>
                        <div>Blue Cross served individuals, Blue Shield served groups</div>
                    </div>
                    <div class="question-option" data-question="3" data-answer="D">
                        <div class="option-label">D</div>
                        <div>Blue Cross was government-run, Blue Shield was private</div>
                    </div>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="question-card">
                <div class="question-text">4. Which ACA provision was upheld by the Supreme Court as a constitutional tax in 2012?</div>
                <div class="question-options">
                    <div class="question-option" data-question="4" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Individual mandate requiring health insurance coverage</div>
                    </div>
                    <div class="question-option" data-question="4" data-answer="B">
                        <div class="option-label">B</div>
                        <div>Medicaid expansion to cover more low-income individuals</div>
                    </div>
                    <div class="question-option" data-question="4" data-answer="C">
                        <div class="option-label">C</div>
                        <div>Health insurance exchanges for plan comparison</div>
                    </div>
                    <div class="question-option" data-question="4" data-answer="D">
                        <div class="option-label">D</div>
                        <div>Prohibition of preexisting condition exclusions</div>
                    </div>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="question-card">
                <div class="question-text">5. What primary problem led to the development of managed care organizations in the 1980s-90s?</div>
                <div class="question-options">
                    <div class="question-option" data-question="5" data-answer="A">
                        <div class="option-label">A</div>
                        <div>Rising healthcare costs and need for cost containment</div>
                    </div>
                    <div class="question-option" data-question="5" data-answer="B">
                        <div class="option-label">B</div>
                        <div>Lack of insurance coverage for preventive services</div>
                    </div>
                    <div class="question-option" data-question="5" data-answer="C">
                        <div class="option-label">C</div>
                        <div>Physician shortages in rural areas</div>
                    </div>
                    <div class="question-option" data-question="5" data-answer="D">
                        <div class="option-label">D</div>
                        <div>Government regulation of insurance premiums</div>
                    </div>
                </div>
            </div>

            <button class="submit-btn" id="submit-btn" onclick="checkAnswers()">Submit Answers</button>

            <div class="results-panel" id="results-panel">
                <div class="results-header">
                    <div class="results-title">Assessment Results</div>
                </div>
                
                <div class="score-display" id="score-display">0/5</div>
                
                <div class="feedback-message" id="feedback-message">
                    Review your answers to reinforce your understanding of healthcare insurance history.
                </div>

                <div class="key-terms-section" style="background: rgba(175, 75, 239, 0.1); border-left-color: var(--color-primary);">
                    <div class="key-terms-title" style="color: var(--color-primary);">üéØ Key Historical Takeaways</div>
                    <div class="terms-grid">
                        <div class="term-item" style="background: white;">
                            <div class="term-name" style="color: var(--color-primary);">Employer-Based System</div>
                            <div class="term-definition">WWII wage controls established employer-sponsored insurance as the dominant US model</div>
                        </div>
                        <div class="term-item" style="background: white;">
                            <div class="term-name" style="color: var(--color-primary);">Government Expansion</div>
                            <div class="term-definition">1965 Medicare/Medicaid created largest coverage expansion in US history</div>
                        </div>
                        <div class="term-item" style="background: white;">
                            <div class="term-name" style="color: var(--color-primary);">Cost Containment</div>
                            <div class="term-definition">Managed care emerged in 1980s-90s to control rising healthcare costs</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Completion Section -->
        <div class="completion-section" id="completion-section">
            <div class="completion-title">üéâ Module Completed!</div>
            
            <div class="completion-message">
                You've successfully explored the comprehensive history of health insurance in the United States. You now understand the evolution from 19th century accident coverage to modern healthcare reform, including key developments, government programs, insurance types, and the impact of the Affordable Care Act.
            </div>
            
            <div style="background: rgba(255, 255, 255, 0.2); border-radius: var(--radius-md); padding: 25px; margin-top: 30px;">
                <div style="font-weight: 700; margin-bottom: 15px; color: white;">üìö Learning Outcomes Achieved</div>
                <div style="color: white; line-height: 1.6;">
                    ‚Ä¢ Trace health insurance evolution from 1850s to present<br>
                    ‚Ä¢ Explain significance of key historical milestones<br>
                    ‚Ä¢ Describe ACA implementation and major provisions<br>
                    ‚Ä¢ Differentiate between major insurance types<br>
                    ‚Ä¢ Understand the legal principles governing insurance contracts
                </div>
            </div>
        </div>
    </div>

    <script>
        // Learning State Management
        const learningState = {
            currentCardIndex: 0,
            masteredCards: new Set(),
            sectionsViewed: new Set(),
            quizAnswers: {},
            progress: 0
        };

        // Enhanced Flashcard Data with proper content
        const flashcardData = [
            {
                term: "Health Insurance",
                definition: "A contract between a policyholder and a third-party payer or government program to reimburse the policyholder for all or a portion of the cost of medical and/or preventive care on the basis of the contract purchased.",
                context: "Historical Context: Originated in mid-1800s with Franklin Health Assurance Company offering non-fatal injury coverage. Evolved from simple accident insurance to comprehensive health protection.",
                category: "Insurance Fundamentals"
            },
            {
                term: "Blue Cross",
                definition: "A non-profit hospital insurance plan originating from Baylor Hospital's 1929 prepaid plan for teachers, focusing on hospital cost coverage with community-rated premiums.",
                context: "Historical Context: Created during the Great Depression to help people pay hospital bills. Established the non-profit insurance model and community rating system.",
                category: "Insurance Models"
            },
            {
                term: "Blue Shield",
                definition: "Physician-sponsored insurance plan developed in 1939 to ensure payment for physician services, complementing Blue Cross hospital coverage.",
                context: "Historical Context: Created by doctors seeking payment security. Initially separate from Blue Cross, they later merged in many markets to provide comprehensive coverage.",
                category: "Insurance Models"
            },
            {
                term: "Medicare",
                definition: "Federal health insurance program established in 1965 for people 65 years or older, certain younger people with disabilities, and people with End-Stage Renal Disease.",
                context: "Historical Context: Part of the Social Security Amendments of 1965. Represents the largest expansion of healthcare coverage in US history alongside Medicaid.",
                category: "Government Programs"
            },
            {
                term: "Medicaid",
                definition: "Joint federal and state program that provides health coverage to low-income individuals and families, with eligibility and benefits varying by state.",
                context: "Historical Context: Created in 1965 alongside Medicare. Expanded under ACA to cover adults with incomes up to 138% of federal poverty level in participating states.",
                category: "Government Programs"
            },
            {
                term: "Affordable Care Act (ACA)",
                definition: "Comprehensive healthcare reform law signed in 2010 that aims to expand coverage, control costs, and improve healthcare quality through insurance market reforms and individual mandate.",
                context: "Historical Context: Most significant healthcare reform since Medicare/Medicaid. Includes provisions for preexisting conditions, young adult coverage, and health insurance exchanges.",
                category: "Healthcare Reform"
            },
            {
                term: "Individual Mandate",
                definition: "ACA requirement that most Americans have qualifying health insurance coverage or pay a penalty, upheld by Supreme Court in 2012 as a constitutional tax.",
                context: "Historical Context: Key provision to ensure broad risk pool for insurance markets. Modified by Congress in 2017 to eliminate penalty starting in 2019.",
                category: "ACA Provisions"
            },
            {
                term: "Health Insurance Exchange",
                definition: "Organized marketplace created by ACA where individuals and small businesses can compare and purchase qualified health insurance plans, often with premium subsidies.",
                context: "Historical Context: Implemented starting in 2014 to increase competition and transparency in insurance markets. Includes federal and state-based exchanges.",
                category: "ACA Provisions"
            },
            {
                term: "Managed Care",
                definition: "Healthcare delivery system designed to control costs through provider network restrictions, utilization review, preventive care emphasis, and negotiated rates.",
                context: "Historical Context: Emerged in 1980s-90s in response to rising healthcare costs. Includes HMOs, PPOs, and other models based on Kaiser's prepaid system.",
                category: "Insurance Models"
            },
            {
                term: "HMO (Health Maintenance Organization)",
                definition: "Type of managed care plan that requires members to use network providers, emphasizes preventive care, and uses primary care physicians as gatekeepers.",
                context: "Historical Context: Based on Kaiser Permanente's prepaid model from 1930s. Grew rapidly in 1970s-80s as cost containment strategy.",
                category: "Insurance Types"
            },
            {
                term: "PPO (Preferred Provider Organization)",
                definition: "Managed care plan with provider networks offering discounted rates, but allowing out-of-network care at higher costs without requiring referrals.",
                context: "Historical Context: Developed as more flexible alternative to HMOs in 1980s. Balances cost control with patient choice of providers.",
                category: "Insurance Types"
            },
            {
                term: "Preexisting Condition",
                definition: "Health condition that exists before insurance coverage begins. ACA prohibits denial of coverage or higher premiums based on preexisting conditions.",
                context: "Historical Context: Before ACA, insurers could deny coverage or charge higher rates for preexisting conditions. ACA eliminated this practice starting in 2014.",
                category: "Insurance Terms"
            },
            {
                term: "Premium",
                definition: "Regular payment made to insurance company to maintain health insurance coverage, typically paid monthly by individuals or employers.",
                context: "Historical Context: Premium structures evolved from community rating (Blue Cross) to experience rating (commercial insurers) to ACA's modified community rating.",
                category: "Insurance Terms"
            },
            {
                term: "Deductible",
                definition: "Amount the insured must pay out-of-pocket for covered healthcare services before the insurance plan begins to pay.",
                context: "Historical Context: Deductibles have increased over time as cost-sharing strategy. High-deductible plans paired with HSAs emerged in 2000s.",
                category: "Insurance Terms"
            },
            {
                term: "Coinsurance",
                definition: "Percentage of costs for covered healthcare services that the insured pays after meeting the deductible (e.g., 20% of allowed charges).",
                context: "Historical Context: Common cost-sharing mechanism in traditional indemnity plans. Managed care plans often use copayments instead for routine services.",
                category: "Insurance Terms"
            }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize flashcards
            updateFlashcard();
            
            // Set up quiz option selection
            document.querySelectorAll('.question-option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.dataset.question;
                    // Remove selected class from other options in same question
                    document.querySelectorAll(`.question-option[data-question="${question}"]`)
                        .forEach(opt => opt.classList.remove('selected'));
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Store answer
                    learningState.quizAnswers[question] = this.dataset.answer;
                    
                    // Update progress
                    updateProgress();
                });
            });

            // Track section viewing
            const sections = document.querySelectorAll('.content-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionTitle = entry.target.querySelector('.section-title').textContent;
                        learningState.sectionsViewed.add(sectionTitle);
                        updateProgress();
                    }
                });
            }, { threshold: 0.5 });
            
            sections.forEach(section => observer.observe(section));
            
            // Initial progress update
            updateProgress();
        });

        // Flashcard Functions
        function updateFlashcard() {
            const card = flashcardData[learningState.currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            
            document.getElementById('card-term').textContent = card.term;
            document.getElementById('card-definition').textContent = card.definition;
            document.getElementById('card-context').innerHTML = `<strong>Historical Context:</strong> ${card.context}`;
            
            // Update category if needed
            const categoryElement = flashcard.querySelector('.flashcard-category');
            if (categoryElement) {
                categoryElement.textContent = card.category;
            }
            
            // Reset card to front
            flashcard.classList.remove('flipped');
            
            // Update counters
            document.getElementById('current-card').textContent = learningState.currentCardIndex + 1;
            document.getElementById('total-cards').textContent = flashcardData.length;
            
            // Update mastery badge
            const masteryBadge = document.getElementById('mastery-badge');
            if (learningState.masteredCards.has(card.term)) {
                masteryBadge.textContent = '‚úÖ Mastered';
                masteryBadge.style.background = 'rgba(0, 184, 148, 0.1)';
                masteryBadge.style.color = 'var(--color-success)';
            } else {
                masteryBadge.textContent = 'üìö Learning';
                masteryBadge.style.background = 'rgba(175, 75, 239, 0.1)';
                masteryBadge.style.color = 'var(--color-primary)';
            }
            
            // Update button states
            document.getElementById('prev-btn').disabled = learningState.currentCardIndex === 0;
            document.getElementById('next-btn').disabled = learningState.currentCardIndex === flashcardData.length - 1;
            
            // Update flashcards mastered count
            updateFlashcardsMastered();
        }

        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        function nextCard() {
            if (learningState.currentCardIndex < flashcardData.length - 1) {
                learningState.currentCardIndex++;
                updateFlashcard();
            }
        }

        function prevCard() {
            if (learningState.currentCardIndex > 0) {
                learningState.currentCardIndex--;
                updateFlashcard();
            }
        }

        function markMastered() {
            const currentCard = flashcardData[learningState.currentCardIndex];
            learningState.masteredCards.add(currentCard.term);
            updateFlashcard();
            updateProgress();
        }

        function shuffleCards() {
            // Fisher-Yates shuffle
            for (let i = flashcardData.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [flashcardData[i], flashcardData[j]] = [flashcardData[j], flashcardData[i]];
            }
            learningState.currentCardIndex = 0;
            updateFlashcard();
        }

        function updateFlashcardsMastered() {
            const masteredCount = learningState.masteredCards.size;
            document.getElementById('flashcards-mastered').textContent = masteredCount;
        }

        // Quiz Functions
        function checkAnswers() {
            const correctAnswers = {
                1: 'A',
                2: 'A',
                3: 'A',
                4: 'A',
                5: 'A'
            };

            let score = 0;
            const totalQuestions = 5;
            let feedbackHTML = '';

            // Check each question
            for (let i = 1; i <= totalQuestions; i++) {
                const selectedOption = document.querySelector(`.question-option.selected[data-question="${i}"]`);
                if (selectedOption) {
                    const userAnswer = selectedOption.dataset.answer;
                    const isCorrect = userAnswer === correctAnswers[i];
                    
                    if (isCorrect) {
                        score++;
                        selectedOption.style.borderColor = '#00b894';
                        selectedOption.style.background = 'rgba(0, 184, 148, 0.1)';
                    } else {
                        selectedOption.style.borderColor = '#e17055';
                        selectedOption.style.background = 'rgba(225, 112, 85, 0.1)';
                        
                        // Highlight correct answer
                        const correctOption = document.querySelector(`.question-option[data-question="${i}"][data-answer="${correctAnswers[i]}"]`);
                        if (correctOption) {
                            correctOption.style.borderColor = '#00b894';
                            correctOption.style.background = 'rgba(0, 184, 148, 0.1)';
                            correctOption.style.fontWeight = '600';
                        }
                    }
                }
            }

            // Update quiz score
            const percentage = Math.round((score / totalQuestions) * 100);
            document.getElementById('quiz-score').textContent = `${percentage}%`;
            
            // Show results
            document.getElementById('score-display').textContent = `${score}/${totalQuestions}`;
            
            // Generate feedback based on score
            if (score === totalQuestions) {
                feedbackHTML = 'üéâ <strong>Excellent!</strong> You have mastered the key concepts of healthcare insurance history. ';
            } else if (score >= totalQuestions * 0.7) {
                feedbackHTML = 'üëç <strong>Good job!</strong> You understand most concepts. Review the incorrect answers to strengthen your knowledge. ';
            } else {
                feedbackHTML = 'üìö <strong>Review needed.</strong> Understanding these historical concepts is crucial for healthcare professionals. Please review the lesson material. ';
            }
            
            feedbackHTML += 'Key historical patterns to remember: employer-based system origins, government expansion, and cost containment evolution.';
            document.getElementById('feedback-message').innerHTML = feedbackHTML;
            
            // Show results panel
            document.getElementById('results-panel').classList.add('show');
            
            // Update progress
            updateProgress();
            
            // Scroll to results
            document.getElementById('results-panel').scrollIntoView({ behavior: 'smooth' });
        }

        // Progress Tracking
        function updateProgress() {
            // Calculate overall progress
            let progress = 0;
            
            // Sections viewed (40% weight)
            const sectionsProgress = (learningState.sectionsViewed.size / 5) * 40;
            progress += sectionsProgress;
            
            // Flashcards mastered (30% weight)
            const flashcardsProgress = (learningState.masteredCards.size / flashcardData.length) * 30;
            progress += flashcardsProgress;
            
            // Quiz completed (30% weight - assume some completion if attempted)
            if (Object.keys(learningState.quizAnswers).length > 0) {
                progress += 30;
            }
            
            learningState.progress = Math.min(100, progress);
            
            // Update progress bar
            document.getElementById('progress-fill').style.width = `${learningState.progress}%`;
            document.getElementById('progress-percentage').textContent = `${Math.round(learningState.progress)}%`;
            
            // Update completed count
            const completedCount = Math.floor((learningState.sectionsViewed.size / 5) * 5);
            document.getElementById('completed-count').textContent = completedCount;
            
            // Update flashcards mastered
            updateFlashcardsMastered();
            
            // Show completion message if all sections viewed
            if (learningState.sectionsViewed.size === 5 && learningState.progress >= 80) {
                document.getElementById('completion-section').classList.add('show');
            }
        }
    </script>
</body>
</html>
