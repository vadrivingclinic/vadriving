<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VA Driving Clinic - Module 3: Fuel-Efficient Driving</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --color-primary: #5f17eb; /* Your exact brand purple */
            --color-primary-soft: #8a5feb;
            --color-secondary: #000000; /* Black */
            --color-accent: #7c3aed;
            --color-success: #10b981;
            --color-error: #ef4444;
            --color-warning: #f59e0b;
            --color-bg: #ffffff; /* White */
            --color-text: #000000; /* Black */
            --color-muted: #6b7280;
            --color-dark: #000000; /* Black */
            --color-light: #f9fafb;
            --radius-lg: 20px;
            --radius-md: 12px;
            --radius-sm: 8px;
            --shadow-soft: 0 10px 30px rgba(95, 23, 235, 0.1);
            --shadow-hover: 0 15px 35px rgba(95, 23, 235, 0.15);
            --shadow-card: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 24px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            color: var(--color-text);
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            body { padding: 12px; }
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(95, 23, 235, 0.5); }
            50% { box-shadow: 0 0 20px rgba(95, 23, 235, 0.8); }
        }

        @keyframes fillUp {
            from { width: 0%; }
            to { width: var(--fuel-level, 50%); }
        }

        @keyframes moneyFloat {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(20deg); opacity: 0; }
        }

        /* Main Container */
        .page {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--color-bg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-soft);
            padding: 30px;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease-out;
            border: 1px solid rgba(95, 23, 235, 0.1);
        }

        @media (max-width: 900px) {
            .page { padding: 20px; }
        }

        @media (max-width: 480px) {
            body { padding: 0; }
            .page {
                border-radius: 0;
                box-shadow: none;
                padding: 16px 12px 20px;
            }
        }

        /* Header */
        .brand-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            width: 100%;
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .brand-logo {
            height: 50px;
            width: auto;
            max-width: 100%;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .brand-logo:hover { 
            transform: scale(1.05); 
            animation: glow 2s infinite;
        }

        .course-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
            max-width: 100%;
        }

        .course-name {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--color-primary);
            font-weight: 700;
        }

        .week-label {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(95, 23, 235, 0.1);
            font-size: 0.8rem;
            color: var(--color-primary);
            font-weight: 600;
            border: 1px solid rgba(95, 23, 235, 0.2);
        }

        .week-label-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--color-primary);
            flex-shrink: 0;
            animation: pulse 2s infinite;
        }

        .badge-mode {
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(95, 23, 235, 0.08);
            border: 1px solid rgba(95, 23, 235, 0.15);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-primary);
            white-space: nowrap;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .badge-mode:hover {
            background: rgba(95, 23, 235, 0.15);
            border-color: var(--color-primary);
            transform: translateY(-2px);
        }

        h1 {
            font-size: clamp(1.8rem, 3vw, 2.4rem);
            line-height: 1.1;
            color: var(--color-text);
            margin-bottom: 10px;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        .module-subtitle {
            font-size: 1rem;
            color: var(--color-muted);
            max-width: 800px;
            margin-bottom: 28px;
            animation: fadeInUp 0.6s ease-out 0.4s both;
            line-height: 1.7;
        }

        /* Time Estimate Banner */
        .time-estimate-banner {
            background: linear-gradient(135deg, rgba(95, 23, 235, 0.1) 0%, rgba(124, 58, 237, 0.1) 100%);
            border: 2px solid rgba(95, 23, 235, 0.2);
            border-radius: var(--radius-md);
            padding: 15px 20px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: fadeIn 0.5s ease;
        }

        .time-estimate-icon {
            font-size: 1.5rem;
            color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .time-estimate-content h3 {
            color: var(--color-primary);
            font-size: 1rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .time-estimate-content p {
            color: var(--color-text);
            font-size: 0.9rem;
            margin: 0;
        }

        .time-highlight {
            color: var(--color-primary);
            font-weight: 800;
            font-size: 1.1em;
        }

        /* Progress Tracker */
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            padding: 0 20px;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 50px;
            right: 50px;
            height: 3px;
            background: rgba(95, 23, 235, 0.1);
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid rgba(95, 23, 235, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-circle {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
            transform: scale(1.1);
            animation: pulse 2s infinite;
        }

        .progress-step.completed .step-circle {
            background: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        .step-label {
            font-size: 0.75rem;
            color: var(--color-muted);
            text-align: center;
            font-weight: 600;
        }

        .progress-step.active .step-label {
            color: var(--color-primary);
            font-weight: 700;
        }

        /* Stats Display */
        .stats-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 600px) {
            .stats-display { grid-template-columns: 1fr; }
        }

        .stat-card {
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(95, 23, 235, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--color-primary);
            display: block;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--color-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        /* Activity Grid */
        .activity-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            margin-bottom: 30px;
        }

        .activity-card {
            background: var(--color-bg);
            border-radius: var(--radius-md);
            border: 1px solid rgba(95, 23, 235, 0.15);
            padding: 24px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--color-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--color-primary);
        }

        .activity-card:hover::before { 
            opacity: 1;
            animation: glow 2s infinite;
        }

        .activity-card.completed {
            border-color: var(--color-success);
        }

        .activity-card.completed::before {
            background: var(--color-success);
            opacity: 1;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .activity-number {
            font-size: 0.85rem;
            font-weight: 800;
            color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid rgba(95, 23, 235, 0.2);
        }

        .activity-status {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 12px;
            background: rgba(95, 23, 235, 0.08);
            color: var(--color-primary);
            font-weight: 600;
            border: 1px solid rgba(95, 23, 235, 0.15);
        }

        .activity-card.completed .activity-status {
            background: rgba(16, 185, 129, 0.1);
            color: var(--color-success);
            border-color: rgba(16, 185, 129, 0.2);
        }

        .activity-title {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--color-text);
            margin-bottom: 12px;
        }

        .activity-description {
            font-size: 0.95rem;
            color: var(--color-muted);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        /* Activity Time Estimate */
        .activity-time-estimate {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            padding: 8px 12px;
            background: rgba(95, 23, 235, 0.05);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--color-primary);
        }

        .activity-time-icon {
            color: var(--color-primary);
            font-weight: bold;
        }

        .activity-time-text {
            font-size: 0.85rem;
            color: var(--color-text);
            font-weight: 600;
        }

        /* Fuel Efficiency Dashboard */
        .dashboard-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .dashboard-container { grid-template-columns: 1fr; }
        }

        .fuel-gauge {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: var(--radius-md);
            padding: 25px;
            border: 2px solid rgba(95, 23, 235, 0.1);
        }

        .gauge-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .gauge-icon {
            font-size: 1.2rem;
        }

        .gauge-visual {
            position: relative;
            height: 120px;
            background: #e5e7eb;
            border-radius: var(--radius-sm);
            overflow: hidden;
            margin: 20px 0;
        }

        .fuel-level {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(to top, #10b981 0%, #34d399 100%);
            transition: width 1s ease;
        }

        .gauge-markers {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 10px;
            align-items: flex-end;
        }

        .marker {
            width: 2px;
            height: 15px;
            background: var(--color-text);
            position: relative;
        }

        .marker-label {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: var(--color-muted);
            white-space: nowrap;
        }

        .current-reading {
            text-align: center;
            font-size: 2rem;
            font-weight: 900;
            color: var(--color-primary);
            margin-top: 10px;
        }

        .reading-label {
            text-align: center;
            font-size: 0.85rem;
            color: var(--color-muted);
        }

        /* Driving Simulator */
        .driving-simulator {
            position: relative;
            height: 200px;
            background: linear-gradient(to bottom, #1e293b 0%, #0f172a 100%);
            border-radius: var(--radius-md);
            overflow: hidden;
            margin: 20px 0;
            border: 3px solid #334155;
        }

        .road {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 80px;
            background: #475569;
            transform: translateY(-50%);
        }

        .lane-markers {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            transform: translateY(-50%);
            background: repeating-linear-gradient(
                to right,
                transparent,
                transparent 30px,
                #f1f5f9 30px,
                #f1f5f9 60px
            );
            animation: slideRoad 2s linear infinite;
        }

        @keyframes slideRoad {
            from { transform: translateY(-50%) translateX(0); }
            to { transform: translateY(-50%) translateX(-60px); }
        }

        .sim-car {
            position: absolute;
            bottom: 40px;
            left: 50px;
            width: 60px;
            height: 30px;
            background: var(--color-primary);
            border-radius: 6px;
            transition: left 0.3s ease, transform 0.3s ease;
            border: 2px solid white;
        }

        .car-front {
            position: absolute;
            right: -5px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 16px;
            background: #1e40af;
            border-radius: 2px;
        }

        .speed-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            font-size: 1.2rem;
            font-weight: 700;
        }

        /* Control Panel */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .control-panel { grid-template-columns: 1fr; }
        }

        .control-btn {
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            border: 2px solid rgba(95, 23, 235, 0.2);
            background: white;
            color: var(--color-text);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            text-align: center;
        }

        .control-btn:hover {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.05);
            transform: translateY(-2px);
        }

        .control-btn.active {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.1);
            color: var(--color-success);
        }

        .control-btn.incorrect {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.1);
            color: var(--color-error);
        }

        .control-icon {
            font-size: 1.5rem;
        }

        /* Comparison Cards */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .comparison-container { grid-template-columns: 1fr; }
        }

        .comparison-card {
            background: rgba(95, 23, 235, 0.03);
            border-radius: var(--radius-md);
            padding: 20px;
            border: 2px solid rgba(95, 23, 235, 0.1);
        }

        .comparison-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .comparison-icon {
            font-size: 1.2rem;
        }

        .comparison-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--color-primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--color-muted);
            margin-top: 5px;
        }

        /* Quiz Questions */
        .quiz-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .quiz-question {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(95, 23, 235, 0.1);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 14px 16px;
            border-radius: var(--radius-sm);
            border: 2px solid rgba(95, 23, 235, 0.2);
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quiz-option:hover {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.05);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            border-color: var(--color-primary);
            background: rgba(95, 23, 235, 0.1);
            font-weight: 600;
        }

        .quiz-option.correct {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.1);
        }

        .quiz-option.incorrect {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.1);
        }

        .option-label {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(95, 23, 235, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
            color: var(--color-primary);
            border: 1px solid rgba(95, 23, 235, 0.2);
        }

        .quiz-option.selected .option-label {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .quiz-option.correct .option-label {
            background: var(--color-success);
            color: white;
            border-color: var(--color-success);
        }

        /* Savings Calculator */
        .savings-calculator {
            background: linear-gradient(135deg, rgba(95, 23, 235, 0.05) 0%, rgba(124, 58, 237, 0.05) 100%);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 20px 0;
            border: 2px solid rgba(95, 23, 235, 0.1);
        }

        .calculator-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .calculator-fields {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .calculator-fields { grid-template-columns: 1fr; }
        }

        .field-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .field-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .field-input {
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            border: 2px solid rgba(95, 23, 235, 0.2);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .field-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(95, 23, 235, 0.1);
        }

        .calculator-results {
            background: white;
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-top: 20px;
            border: 2px solid rgba(95, 23, 235, 0.2);
            display: none;
        }

        .calculator-results.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(95, 23, 235, 0.1);
        }

        .result-item:last-child {
            border-bottom: none;
            font-weight: 700;
            color: var(--color-primary);
            font-size: 1.1rem;
        }

        /* Feedback */
        .feedback-container {
            background: rgba(95, 23, 235, 0.03);
            border-radius: var(--radius-sm);
            padding: 20px;
            border: 1px solid rgba(95, 23, 235, 0.15);
            margin-top: 20px;
            display: none;
            border-left: 4px solid var(--color-primary);
        }

        .feedback-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback-title {
            font-size: 0.95rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .feedback-icon {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .feedback-icon.correct { 
            color: var(--color-success); 
        }
        
        .feedback-icon.incorrect { 
            color: var(--color-error); 
        }

        .feedback-content {
            font-size: 0.9rem;
            color: var(--color-text);
            line-height: 1.7;
        }

        .feedback-content strong { 
            color: var(--color-primary); 
            font-weight: 700;
        }

        .savings-details {
            background: rgba(16, 185, 129, 0.05);
            border-left: 3px solid var(--color-success);
            padding: 14px 18px;
            margin: 14px 0;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        /* Money Animation */
        .money-float {
            position: fixed;
            font-size: 1.5rem;
            pointer-events: none;
            z-index: 1000;
            animation: moneyFloat 1s ease-out forwards;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 28px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
            border: 2px solid var(--color-primary);
        }

        .btn-primary:hover {
            background: #4c0fcf;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(95, 23, 235, 0.4);
            animation: glow 1.5s infinite;
        }

        .btn-secondary {
            background: white;
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
        }

        .btn-secondary:hover {
            background: rgba(95, 23, 235, 0.1);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(95, 23, 235, 0.2);
        }

        .btn-icon { 
            font-size: 1.2em; 
            font-weight: bold;
        }

        /* Results Panel */
        .results-panel {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: white;
            border-radius: var(--radius-md);
            padding: 40px;
            margin-top: 40px;
            display: none;
            animation: fadeInUp 0.6s ease;
            border: 2px solid var(--color-primary);
        }

        .results-panel.show { 
            display: block; 
            animation: glow 2s infinite;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .results-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: white;
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--color-primary);
            text-align: center;
            margin: 30px 0;
            text-shadow: 0 0 20px rgba(95, 23, 235, 0.7);
            animation: pulse 2s infinite;
        }

        .safety-insights {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            padding: 25px;
            margin-top: 25px;
            border-left: 4px solid var(--color-primary);
        }

        .insights-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--color-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .insights-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .insights-list li {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            font-size: 0.95rem;
            color: #e5e7eb;
            line-height: 1.6;
        }

        .insight-dot {
            width: 8px;
            height: 8px;
            margin-top: 10px;
            border-radius: 999px;
            background: var(--color-primary);
            flex-shrink: 0;
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <main class="page" aria-labelledby="module-heading">
        <!-- Header -->
        <header class="brand-row">
            <div class="brand">
                <img
                    src="https://lwfiles.mycourse.app/vadrivingclinic-public/9f5c6b8121721c8ef241f929fd983b3e.png"
                    alt="VA Driving Clinic logo"
                    class="brand-logo"
                />
                <div class="course-meta">
                    <span class="course-name">VA Driving Clinic ‚Ä¢ Module 3</span>
                    <div class="week-label">
                        <span class="week-label-dot"></span>
                        <span>Fuel-Efficient Driving</span>
                    </div>
                </div>
            </div>
            <span class="badge-mode">Interactive Simulation</span>
        </header>

        <h1 id="module-heading">Fuel-Efficient Driving Simulation</h1>
        <p class="module-subtitle">
            An interactive 5-minute simulation to master fuel-efficient driving techniques. Learn how to save up to 33% on fuel costs 
            through smart driving habits, proper vehicle maintenance, and efficient route planning. These skills not only save money 
            but also reduce environmental impact.
        </p>

        <!-- Time Estimate Banner -->
        <div class="time-estimate-banner">
            <div class="time-estimate-icon">
                ‚è±Ô∏è
            </div>
            <div class="time-estimate-content">
                <h3>Simulation Time Estimate</h3>
                <p>Complete this interactive simulation in approximately <span class="time-highlight">5 minutes</span>. Master three key areas of fuel-efficient driving with real-time feedback and practical savings calculations.</p>
            </div>
        </div>

        <!-- Key Stats -->
        <div class="stats-display">
            <div class="stat-card">
                <span class="stat-number" id="potential-savings">33%</span>
                <span class="stat-label">Potential Fuel Savings</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="avg-savings">$500</span>
                <span class="stat-label">Annual Savings</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="co2-reduction">2.5T</span>
                <span class="stat-label">CO‚ÇÇ Reduction/Year</span>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Smart Driving</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Vehicle Maintenance</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Savings Calculator</div>
            </div>
        </div>

        <!-- Activity Grid -->
        <div class="activity-grid">
            <!-- Activity 1: Smart Driving Habits -->
            <section class="activity-card" id="activity-1" data-activity="1">
                <div class="activity-header">
                    <span class="activity-number">Activity 1</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">Smart Driving Habits Simulation</h3>
                <p class="activity-description">
                    Practice fuel-efficient driving techniques in this interactive simulation. Learn how acceleration, braking, 
                    and speed management affect your fuel economy. According to the U.S. Department of Energy, smart driving 
                    can improve fuel economy by up to 33%.
                </p>

                <div class="activity-time-estimate">
                    <span class="activity-time-icon">‚è±Ô∏è</span>
                    <span class="activity-time-text">Estimated time: <strong>1-2 minutes</strong></span>
                </div>

                <!-- Driving Simulator -->
                <div class="driving-simulator" id="driving-simulator">
                    <div class="road">
                        <div class="lane-markers"></div>
                        <div class="sim-car" id="sim-car">
                            <div class="car-front"></div>
                        </div>
                    </div>
                    <div class="speed-display" id="speed-display">55 MPH</div>
                </div>

                <!-- Fuel Gauge -->
                <div class="dashboard-container">
                    <div class="fuel-gauge">
                        <div class="gauge-title">
                            <span class="gauge-icon">‚õΩ</span>
                            Instant Fuel Economy
                        </div>
                        <div class="gauge-visual">
                            <div class="fuel-level" id="fuel-level" style="width: 65%;"></div>
                            <div class="gauge-markers">
                                <div class="marker">
                                    <span class="marker-label">10 MPG</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">20 MPG</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">30 MPG</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">40 MPG</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">50 MPG</span>
                                </div>
                            </div>
                        </div>
                        <div class="current-reading" id="mpg-reading">32.5</div>
                        <div class="reading-label">Miles Per Gallon (MPG)</div>
                    </div>

                    <div class="fuel-gauge">
                        <div class="gauge-title">
                            <span class="gauge-icon">üí∞</span>
                            Fuel Cost Per Mile
                        </div>
                        <div class="gauge-visual">
                            <div class="fuel-level" id="cost-level" style="width: 35%; background: linear-gradient(to top, #f59e0b 0%, #fbbf24 100%);"></div>
                            <div class="gauge-markers">
                                <div class="marker">
                                    <span class="marker-label">$0.50</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">$0.40</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">$0.30</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">$0.20</span>
                                </div>
                                <div class="marker">
                                    <span class="marker-label">$0.10</span>
                                </div>
                            </div>
                        </div>
                        <div class="current-reading" id="cost-reading">$0.15</div>
                        <div class="reading-label">Cost Per Mile ($3.50/gal)</div>
                    </div>
                </div>

                <!-- Driving Controls -->
                <div class="control-panel" id="driving-controls">
                    <button class="control-btn" data-action="smooth-accel">
                        <span class="control-icon">üöÄ</span>
                        <span>Smooth Acceleration</span>
                        <small>Gradual speed increase</small>
                    </button>
                    <button class="control-btn" data-action="hard-accel">
                        <span class="control-icon">‚ö°</span>
                        <span>Hard Acceleration</span>
                        <small>Rapid speed increase</small>
                    </button>
                    <button class="control-btn" data-action="coast">
                        <span class="control-icon">üåä</span>
                        <span>Coast to Stop</span>
                        <small>Gradual deceleration</small>
                    </button>
                    <button class="control-btn" data-action="hard-brake">
                        <span class="control-icon">üõë</span>
                        <span>Hard Braking</span>
                        <small>Sudden stop</small>
                    </button>
                    <button class="control-btn" data-action="cruise-control">
                        <span class="control-icon">üéØ</span>
                        <span>Cruise Control</span>
                        <small>Steady speed (55 MPH)</small>
                    </button>
                    <button class="control-btn" data-action="speed-up">
                        <span class="control-icon">üìà</span>
                        <span>Increase Speed</span>
                        <small>75 MPH highway</small>
                    </button>
                </div>

                <!-- Comparison -->
                <div class="comparison-container">
                    <div class="comparison-card">
                        <div class="comparison-title">
                            <span class="comparison-icon">‚úÖ</span>
                            Efficient Driving
                        </div>
                        <p>Smooth acceleration, steady speeds, and anticipating stops can improve fuel economy by 15-30% at highway speeds and 10-40% in stop-and-go traffic.</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="efficient-mpg">35.5</div>
                                <div class="stat-label">Avg MPG</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="efficient-cost">$0.10</div>
                                <div class="stat-label">Cost/mile</div>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-title">
                            <span class="comparison-icon">‚ùå</span>
                            Aggressive Driving
                        </div>
                        <p>Hard acceleration and braking can lower gas mileage by 15-30% at highway speeds and 10-40% in stop-and-go traffic (U.S. Department of Energy).</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="aggressive-mpg">24.5</div>
                                <div class="stat-label">Avg MPG</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="aggressive-cost">$0.14</div>
                                <div class="stat-label">Cost/mile</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-1">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">‚úì</span>
                        Smart Driving Techniques Mastered
                    </div>
                    <div class="feedback-content">
                        <strong>‚úÖ Key Takeaways:</strong><br><br>
                        ‚Ä¢ <strong>Smooth Acceleration:</strong> Gradual acceleration improves fuel economy by 10-40% compared to rapid starts<br>
                        ‚Ä¢ <strong>Steady Speeds:</strong> Using cruise control on highways can save 7-14% on fuel<br>
                        ‚Ä¢ <strong>Anticipatory Driving:</strong> Coasting to stops instead of hard braking saves fuel and reduces wear<br>
                        ‚Ä¢ <strong>Speed Management:</strong> Fuel economy decreases rapidly above 50 mph; each 5 mph over 50 is like paying $0.18-$0.36 more per gallon<br><br>
                        
                        <div class="savings-details">
                            <strong>üí∞ Real Savings:</strong><br>
                            For a 15,000-mile annual driving distance:<br>
                            ‚Ä¢ Efficient driving (35 MPG): $1,500/year<br>
                            ‚Ä¢ Aggressive driving (25 MPG): $2,100/year<br>
                            ‚Ä¢ <strong>Potential savings: $600/year</strong>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Activity 2: Vehicle Maintenance -->
            <section class="activity-card" id="activity-2" data-activity="2">
                <div class="activity-header">
                    <span class="activity-number">Activity 2</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">Vehicle Maintenance Impact</h3>
                <p class="activity-description">
                    Discover how proper vehicle maintenance affects fuel efficiency. Learn which maintenance tasks have the 
                    biggest impact on your fuel economy and how to maintain your vehicle for optimal performance.
                </p>

                <div class="activity-time-estimate">
                    <span class="activity-time-icon">‚è±Ô∏è</span>
                    <span class="activity-time-text">Estimated time: <strong>1-2 minutes</strong></span>
                </div>

                <!-- Maintenance Quiz -->
                <div class="quiz-container">
                    <div class="quiz-question">1. How much can properly inflated tires improve fuel economy?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="1" data-option="A">
                            <span class="option-label">A</span>
                            <span>Up to 3% improvement</span>
                        </div>
                        <div class="quiz-option" data-question="1" data-option="B">
                            <span class="option-label">B</span>
                            <span>Up to 10% improvement</span>
                        </div>
                        <div class="quiz-option" data-question="1" data-option="C">
                            <span class="option-label">C</span>
                            <span>No significant improvement</span>
                        </div>
                        <div class="quiz-option" data-question="1" data-option="D">
                            <span class="option-label">D</span>
                            <span>Up to 1% improvement</span>
                        </div>
                    </div>

                    <div class="quiz-question">2. Replacing a clogged air filter can improve fuel economy by:</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="2" data-option="A">
                            <span class="option-label">A</span>
                            <span>Up to 10% (U.S. DOE)</span>
                        </div>
                        <div class="quiz-option" data-question="2" data-option="B">
                            <span class="option-label">B</span>
                            <span>Up to 2% only</span>
                        </div>
                        <div class="quiz-option" data-question="2" data-option="C">
                            <span class="option-label">C</span>
                            <span>No improvement on modern cars</span>
                        </div>
                        <div class="quiz-option" data-question="2" data-option="D">
                            <span class="option-label">D</span>
                            <span>Only improves acceleration</span>
                        </div>
                    </div>

                    <div class="quiz-question">3. Which maintenance item has the LEAST impact on fuel economy?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="3" data-option="A">
                            <span class="option-label">A</span>
                            <span>Engine oil type and condition</span>
                        </div>
                        <div class="quiz-option" data-question="3" data-option="B">
                            <span class="option-label">B</span>
                            <span>Wheel alignment</span>
                        </div>
                        <div class="quiz-option" data-question="3" data-option="C">
                            <span class="option-label">C</span>
                            <span>Spark plug condition</span>
                        </div>
                        <div class="quiz-option" data-question="3" data-option="D">
                            <span class="option-label">D</span>
                            <span>Air conditioning refrigerant level</span>
                        </div>
                    </div>
                </div>

                <!-- Maintenance Impact Visualization -->
                <div class="comparison-container" style="margin-top: 25px;">
                    <div class="comparison-card">
                        <div class="comparison-title">
                            <span class="comparison-icon">üõû</span>
                            Tire Maintenance Impact
                        </div>
                        <p><strong>Under-inflated tires</strong> increase rolling resistance, making your engine work harder. Proper inflation can improve gas mileage by up to 3%.</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-value">-10%</div>
                                <div class="stat-label">Fuel Economy Loss</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">+3%</div>
                                <div class="stat-label">With Proper Inflation</div>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-title">
                            <span class="comparison-icon">‚öôÔ∏è</span>
                            Engine Maintenance Impact
                        </div>
                        <p><strong>Regular tune-ups</strong> including spark plugs, air filters, and oil changes can improve fuel economy by 4-40% depending on repair needed.</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-value">+10%</div>
                                <div class="stat-label">Clean Air Filter</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">+2%</div>
                                <div class="stat-label">Right Motor Oil</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-2">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">‚úì</span>
                        Maintenance Impact Analysis
                    </div>
                    <div class="feedback-content">
                        <strong>‚úÖ Correct Answers:</strong><br>
                        1. <strong>A - Up to 3% improvement:</strong> Proper tire pressure is crucial for fuel efficiency<br>
                        2. <strong>A - Up to 10% (U.S. DOE):</strong> A clean air filter improves airflow and combustion<br>
                        3. <strong>D - Air conditioning refrigerant level:</strong> While AC use affects fuel economy, refrigerant level has minimal direct impact<br><br>
                        
                        <strong>üîß Maintenance Best Practices:</strong><br>
                        ‚Ä¢ <strong>Check tire pressure monthly:</strong> Use manufacturer's recommended PSI (not max on tire sidewall)<br>
                        ‚Ä¢ <strong>Replace air filters annually:</strong> Or every 12,000-15,000 miles<br>
                        ‚Ä¢ <strong>Use recommended motor oil:</strong> Can improve gas mileage by 1-2%<br>
                        ‚Ä¢ <strong>Fix serious maintenance problems:</strong> A faulty oxygen sensor can improve mileage by up to 40%<br><br>
                        
                        <strong>üìä Combined Impact:</strong><br>
                        Proper maintenance combined with efficient driving can improve fuel economy by 20-40%, saving the average driver $500-$1,000 annually.
                    </div>
                </div>
            </section>

            <!-- Activity 3: Savings Calculator -->
            <section class="activity-card" id="activity-3" data-activity="3">
                <div class="activity-header">
                    <span class="activity-number">Activity 3</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">Personal Savings Calculator</h3>
                <p class="activity-description">
                    Calculate your potential fuel savings based on your actual driving habits and vehicle. See how much money 
                    you can save annually by adopting fuel-efficient driving techniques and proper vehicle maintenance.
                </p>

                <div class="activity-time-estimate">
                    <span class="activity-time-icon">‚è±Ô∏è</span>
                    <span class="activity-time-text">Estimated time: <strong>1-2 minutes</strong></span>
                </div>

                <!-- Savings Calculator -->
                <div class="savings-calculator">
                    <div class="calculator-title">
                        <span class="calculator-icon">üí∞</span>
                        Personal Fuel Savings Calculator
                    </div>
                    
                    <div class="calculator-fields">
                        <div class="field-group">
                            <label class="field-label">Annual Miles Driven</label>
                            <input type="number" id="annual-miles" class="field-input" value="15000" min="1000" max="100000" step="1000">
                        </div>
                        <div class="field-group">
                            <label class="field-label">Current Fuel Economy (MPG)</label>
                            <input type="number" id="current-mpg" class="field-input" value="25" min="10" max="50" step="0.5">
                        </div>
                        <div class="field-group">
                            <label class="field-label">Local Fuel Price ($/gallon)</label>
                            <input type="number" id="fuel-price" class="field-input" value="3.50" min="2.00" max="6.00" step="0.01">
                        </div>
                        <div class="field-group">
                            <label class="field-label">Improvement Goal (%)</label>
                            <select id="improvement-goal" class="field-input">
                                <option value="10">10% Improvement</option>
                                <option value="20" selected>20% Improvement</option>
                                <option value="30">30% Improvement</option>
                                <option value="40">40% Improvement</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn btn-primary" id="calculate-savings" style="width: 100%; margin-top: 15px;">
                        <span class="btn-icon">üßÆ</span>
                        Calculate My Savings
                    </button>

                    <div class="calculator-results" id="calculator-results">
                        <div class="result-item">
                            <span>Current Annual Fuel Cost:</span>
                            <span id="current-cost">$2,100.00</span>
                        </div>
                        <div class="result-item">
                            <span>Improved Annual Fuel Cost:</span>
                            <span id="improved-cost">$1,680.00</span>
                        </div>
                        <div class="result-item">
                            <span>Annual Fuel Savings:</span>
                            <span id="annual-savings">$420.00</span>
                        </div>
                        <div class="result-item">
                            <span>Monthly Savings:</span>
                            <span id="monthly-savings">$35.00</span>
                        </div>
                        <div class="result-item">
                            <span>5-Year Total Savings:</span>
                            <span id="five-year-savings">$2,100.00</span>
                        </div>
                    </div>
                </div>

                <!-- Efficiency Tips -->
                <div class="comparison-container" style="margin-top: 25px;">
                    <div class="comparison-card">
                        <div class="comparison-title">
                            <span class="comparison-icon">üöó</span>
                            Reduce Vehicle Load
                        </div>
                        <p>Every extra 100 pounds reduces fuel economy by about 1%. Remove unnecessary items from your trunk and roof racks when not in use.</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-value">100 lbs</div>
                                <div class="stat-label">Extra Weight</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">-1%</div>
                                <div class="stat-label">MPG Impact</div>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <div class="comparison-title">
                            <span class="comparison-icon">üîÑ</span>
                            Trip Planning
                        </div>
                        <p>Combining errands into one trip can save fuel. Several short trips taken from a cold start can use twice as much fuel as one trip covering the same distance.</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-value">50%</div>
                                <div class="stat-label">More Fuel Used</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">Cold Starts</div>
                                <div class="stat-label">Short Trips</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-3">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">‚úì</span>
                        Personalized Savings Plan
                    </div>
                    <div class="feedback-content">
                        <strong>‚úÖ Your Fuel Efficiency Plan:</strong><br><br>
                        
                        <strong>Immediate Actions (0-30 days):</strong><br>
                        1. <strong>Check tire pressure</strong> - Set to manufacturer's recommendation<br>
                        2. <strong>Remove excess weight</strong> - Clear trunk and back seats<br>
                        3. <strong>Practice smooth acceleration</strong> - Accelerate gradually from stops<br>
                        4. <strong>Use cruise control</strong> - On highways whenever safe<br><br>
                        
                        <strong>Short-Term Actions (1-3 months):</strong><br>
                        1. <strong>Schedule maintenance</strong> - Air filter, oil change, spark plugs if due<br>
                        2. <strong>Plan trips efficiently</strong> - Combine errands, avoid rush hour<br>
                        3. <strong>Use AC wisely</strong> - At highway speeds, close windows and use AC<br><br>
                        
                        <strong>Long-Term Habits:</strong><br>
                        1. <strong>Regular maintenance schedule</strong> - Follow manufacturer's recommendations<br>
                        2. <strong>Monitor fuel economy</strong> - Track MPG to identify issues early<br>
                        3. <strong>Consider vehicle upgrade</strong> - Next vehicle purchase: prioritize fuel efficiency<br><br>
                        
                        <div class="savings-details">
                            <strong>üí° Pro Tip:</strong> Use your vehicle's trip computer or a fuel tracking app to monitor your actual fuel economy. 
                            A sudden drop could indicate maintenance issues needing attention.
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-secondary" id="reset-all-btn">
                <span class="btn-icon">‚Üª</span>
                Reset Simulation
            </button>
            <button class="btn btn-primary" id="view-results-btn">
                <span class="btn-icon">üìä</span>
                View Complete Results
            </button>
        </div>

        <!-- Results Panel -->
        <div class="results-panel" id="results-panel">
            <div class="results-header">
                <h2 class="results-title">Fuel Efficiency Mastery</h2>
                <div class="score-display" id="final-score">0%</div>
            </div>
            
            <div class="safety-insights">
                <h3 class="insights-title">
                    <span>üå±</span> Environmental & Economic Impact
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Carbon Footprint Reduction:</strong> Improving fuel economy from 25 MPG to 35 MPG reduces CO‚ÇÇ emissions by approximately 2.5 tons annually for the average driver. This is equivalent to planting 60 trees each year.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>National Impact:</strong> If all U.S. drivers improved fuel efficiency by just 5 MPG, it would save over 20 billion gallons of gasoline annually, reducing oil imports by 15% and saving consumers $60 billion each year.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Vehicle Longevity:</strong> Fuel-efficient driving habits also extend vehicle life. Smooth acceleration and braking reduce wear on brakes, tires, and engine components, potentially adding years to your vehicle's lifespan.</span>
                    </li>
                </ul>
            </div>
            
            <div class="safety-insights" style="margin-top: 20px;">
                <h3 class="insights-title">
                    <span>üöÄ</span> Advanced Efficiency Techniques
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Pulse and Glide Technique:</strong> On highways with gentle terrain, briefly accelerating then coasting can improve fuel economy by 5-10%. Modern hybrids use this technique automatically through regenerative braking systems.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Aerodynamic Optimization:</strong> At highway speeds, over 50% of engine power goes to overcoming air resistance. Removing roof racks when not in use and keeping windows closed above 45 MPH can improve fuel economy by 5-10%.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Technology Integration:</strong> Use smartphone apps like Waze or Google Maps with real-time traffic data to avoid congestion. Many modern vehicles have Eco modes that optimize performance for fuel efficiency - use them consistently.</span>
                    </li>
                </ul>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // State Management
            const state = {
                activities: {
                    1: { completed: false, correct: 0, total: 6, score: 0, actions: [] },
                    2: { completed: false, correct: 0, total: 3, score: 0, answers: {} },
                    3: { completed: false, correct: 0, total: 1, score: 0 }
                },
                startedAt: new Date(),
                timeSpent: 0,
                currentMPG: 32.5,
                currentCostPerMile: 0.15,
                fuelPrice: 3.50
            };

            // Correct answers for Activity 2
            const correctAnswers = {
                1: 'A',
                2: 'A',
                3: 'D'
            };

            // DOM Elements
            const progressSteps = document.querySelectorAll('.progress-step');
            const activityCards = document.querySelectorAll('.activity-card');
            const resetBtn = document.getElementById('reset-all-btn');
            const resultsBtn = document.getElementById('view-results-btn');
            const resultsPanel = document.getElementById('results-panel');
            const finalScore = document.getElementById('final-score');

            // Timer
            function updateTimer() {
                const now = new Date();
                const diff = Math.floor((now - state.startedAt) / 1000);
                state.timeSpent = diff;
            }

            setInterval(updateTimer, 1000);

            // Update Progress
            function updateProgress() {
                let completed = 0;
                
                Object.values(state.activities).forEach(activity => {
                    if (activity.completed) completed++;
                });

                progressSteps.forEach((step, index) => {
                    if (index < completed) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index === completed) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
            }

            // Activity 1: Smart Driving Simulation
            function initActivity1() {
                const drivingControls = document.querySelectorAll('#driving-controls .control-btn');
                const feedback = document.getElementById('feedback-1');
                const status = document.querySelector('#activity-1 .activity-status');
                const simCar = document.getElementById('sim-car');
                const speedDisplay = document.getElementById('speed-display');
                const mpgReading = document.getElementById('mpg-reading');
                const costReading = document.getElementById('cost-reading');
                const fuelLevel = document.getElementById('fuel-level');
                const costLevel = document.getElementById('cost-level');
                const efficientMPG = document.getElementById('efficient-mpg');
                const efficientCost = document.getElementById('efficient-cost');
                const aggressiveMPG = document.getElementById('aggressive-mpg');
                const aggressiveCost = document.getElementById('aggressive-cost');

                let currentSpeed = 55;
                let actionsTaken = 0;

                // MPG impact for different actions
                const actionImpacts = {
                    'smooth-accel': { mpg: 2.5, cost: -0.02, speed: 3 },
                    'hard-accel': { mpg: -4.0, cost: 0.03, speed: 8 },
                    'coast': { mpg: 3.0, cost: -0.025, speed: -10 },
                    'hard-brake': { mpg: -3.5, cost: 0.025, speed: -20 },
                    'cruise-control': { mpg: 1.5, cost: -0.01, speed: 0 },
                    'speed-up': { mpg: -6.0, cost: 0.045, speed: 20 }
                };

                // Update displays
                function updateDisplays() {
                    // Update MPG and cost readings
                    mpgReading.textContent = state.currentMPG.toFixed(1);
                    costReading.textContent = `$${state.currentCostPerMile.toFixed(2)}`;
                    
                    // Update gauge visuals (normalize to 0-100%)
                    const mpgPercentage = Math.min(100, (state.currentMPG / 50) * 100);
                    const costPercentage = Math.min(100, (0.50 - state.currentCostPerMile) / 0.40 * 100);
                    
                    fuelLevel.style.width = `${mpgPercentage}%`;
                    costLevel.style.width = `${costPercentage}%`;
                    
                    // Update speed display and car position
                    speedDisplay.textContent = `${currentSpeed} MPH`;
                    const carPosition = 50 + (currentSpeed - 55) * 0.5;
                    simCar.style.left = `${carPosition}px`;
                    
                    // Update comparison stats
                    efficientMPG.textContent = (state.currentMPG + 3).toFixed(1);
                    efficientCost.textContent = `$${(state.currentCostPerMile - 0.05).toFixed(2)}`;
                    aggressiveMPG.textContent = (state.currentMPG - 8).toFixed(1);
                    aggressiveCost.textContent = `$${(state.currentCostPerMile + 0.04).toFixed(2)}`;
                }

                // Handle control button clicks
                drivingControls.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const action = this.dataset.action;
                        const impact = actionImpacts[action];
                        
                        // Remove active class from all buttons
                        drivingControls.forEach(b => b.classList.remove('active', 'incorrect'));
                        
                        // Mark this button
                        this.classList.add('active');
                        
                        // Apply impact
                        state.currentMPG += impact.mpg;
                        state.currentCostPerMile += impact.cost;
                        currentSpeed += impact.speed;
                        
                        // Ensure values stay in reasonable ranges
                        state.currentMPG = Math.max(10, Math.min(50, state.currentMPG));
                        state.currentCostPerMile = Math.max(0.08, Math.min(0.50, state.currentCostPerMile));
                        currentSpeed = Math.max(20, Math.min(90, currentSpeed));
                        
                        // Update displays
                        updateDisplays();
                        
                        // Store action
                        if (!state.activities[1].actions.includes(action)) {
                            state.activities[1].actions.push(action);
                            actionsTaken++;
                        }
                        
                        // Check if completed
                        if (actionsTaken >= 4 && !state.activities[1].completed) {
                            // Calculate score based on efficient actions
                            const efficientActions = ['smooth-accel', 'coast', 'cruise-control'];
                            const efficientCount = state.activities[1].actions.filter(a => 
                                efficientActions.includes(a)).length;
                            
                            state.activities[1].correct = efficientCount;
                            state.activities[1].completed = true;
                            state.activities[1].score = Math.round((efficientCount / 3) * 100);
                            
                            status.textContent = 'Completed';
                            document.querySelector('#activity-1').classList.add('completed');
                            feedback.classList.add('show');
                            
                            updateProgress();
                        }
                    });
                });

                // Initialize displays
                updateDisplays();
            }

            // Activity 2: Vehicle Maintenance Quiz
            function initActivity2() {
                const quizOptions = document.querySelectorAll('#activity-2 .quiz-option');
                const feedback = document.getElementById('feedback-2');
                const status = document.querySelector('#activity-2 .activity-status');
                
                let answeredQuestions = 0;

                quizOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const question = this.dataset.question;
                        const selectedOption = this.dataset.option;
                        
                        // Remove selected class from all options for this question
                        const allOptionsForQuestion = document.querySelectorAll(`[data-question="${question}"]`);
                        allOptionsForQuestion.forEach(opt => {
                            opt.classList.remove('selected', 'correct', 'incorrect');
                        });
                        
                        // Add selected class to clicked option
                        this.classList.add('selected');
                        
                        // Check answer
                        const isCorrect = selectedOption === correctAnswers[question];
                        
                        if (isCorrect) {
                            this.classList.add('correct');
                            state.activities[2].correct++;
                        } else {
                            this.classList.add('incorrect');
                            
                            // Highlight correct answer
                            const correctOption = document.querySelector(`[data-question="${question}"][data-option="${correctAnswers[question]}"]`);
                            correctOption.classList.add('correct');
                        }
                        
                        // Store the answer
                        state.activities[2].answers[question] = selectedOption;
                        
                        // Check if all questions are answered
                        answeredQuestions = Object.keys(state.activities[2].answers).length;
                        if (answeredQuestions === 3 && !state.activities[2].completed) {
                            state.activities[2].completed = true;
                            state.activities[2].score = Math.round((state.activities[2].correct / 3) * 100);
                            
                            status.textContent = 'Completed';
                            document.querySelector('#activity-2').classList.add('completed');
                            feedback.classList.add('show');
                            
                            updateProgress();
                        }
                    });
                });
            }

            // Activity 3: Savings Calculator
            function initActivity3() {
                const calculateBtn = document.getElementById('calculate-savings');
                const resultsDiv = document.getElementById('calculator-results');
                const feedback = document.getElementById('feedback-3');
                const status = document.querySelector('#activity-3 .activity-status');
                
                // Input elements
                const annualMilesInput = document.getElementById('annual-miles');
                const currentMpgInput = document.getElementById('current-mpg');
                const fuelPriceInput = document.getElementById('fuel-price');
                const improvementGoalSelect = document.getElementById('improvement-goal');
                
                // Result elements
                const currentCostEl = document.getElementById('current-cost');
                const improvedCostEl = document.getElementById('improved-cost');
                const annualSavingsEl = document.getElementById('annual-savings');
                const monthlySavingsEl = document.getElementById('monthly-savings');
                const fiveYearSavingsEl = document.getElementById('five-year-savings');

                function calculateSavings() {
                    // Get input values
                    const annualMiles = parseFloat(annualMilesInput.value);
                    const currentMPG = parseFloat(currentMpgInput.value);
                    const fuelPrice = parseFloat(fuelPriceInput.value);
                    const improvementGoal = parseFloat(improvementGoalSelect.value) / 100;
                    
                    // Calculate current costs
                    const currentGallons = annualMiles / currentMPG;
                    const currentCost = currentGallons * fuelPrice;
                    
                    // Calculate improved costs
                    const improvedMPG = currentMPG * (1 + improvementGoal);
                    const improvedGallons = annualMiles / improvedMPG;
                    const improvedCost = improvedGallons * fuelPrice;
                    
                    // Calculate savings
                    const annualSavings = currentCost - improvedCost;
                    const monthlySavings = annualSavings / 12;
                    const fiveYearSavings = annualSavings * 5;
                    
                    // Update display with formatting
                    currentCostEl.textContent = `$${currentCost.toFixed(2)}`;
                    improvedCostEl.textContent = `$${improvedCost.toFixed(2)}`;
                    annualSavingsEl.textContent = `$${annualSavings.toFixed(2)}`;
                    monthlySavingsEl.textContent = `$${monthlySavings.toFixed(2)}`;
                    fiveYearSavingsEl.textContent = `$${fiveYearSavings.toFixed(2)}`;
                    
                    // Show results
                    resultsDiv.classList.add('show');
                    
                    // Mark activity as completed
                    if (!state.activities[3].completed) {
                        state.activities[3].completed = true;
                        state.activities[3].correct = 1;
                        state.activities[3].score = 100;
                        
                        status.textContent = 'Completed';
                        document.querySelector('#activity-3').classList.add('completed');
                        feedback.classList.add('show');
                        
                        updateProgress();
                        
                        // Show money animation
                        showMoneyAnimation(annualSavings);
                    }
                }

                // Money animation function
                function showMoneyAnimation(savings) {
                    const animationContainer = document.querySelector('.page');
                    const moneyCount = Math.min(20, Math.floor(savings / 50));
                    
                    for (let i = 0; i < moneyCount; i++) {
                        const money = document.createElement('div');
                        money.className = 'money-float';
                        money.textContent = 'üí∞';
                        money.style.left = `${Math.random() * 80 + 10}%`;
                        money.style.top = '50%';
                        money.style.fontSize = `${Math.random() * 20 + 20}px`;
                        
                        animationContainer.appendChild(money);
                        
                        // Remove after animation completes
                        setTimeout(() => {
                            money.remove();
                        }, 1000);
                    }
                }

                // Event listener for calculate button
                calculateBtn.addEventListener('click', calculateSavings);
                
                // Also calculate when inputs change
                [annualMilesInput, currentMpgInput, fuelPriceInput, improvementGoalSelect].forEach(input => {
                    input.addEventListener('change', function() {
                        if (state.activities[3].completed) {
                            calculateSavings();
                        }
                    });
                });
                
                // Initial calculation
                calculateSavings();
            }

            // Reset Simulation
            function resetSimulation() {
                // Reset state
                state.activities = {
                    1: { completed: false, correct: 0, total: 6, score: 0, actions: [] },
                    2: { completed: false, correct: 0, total: 3, score: 0, answers: {} },
                    3: { completed: false, correct: 0, total: 1, score: 0 }
                };
                
                state.currentMPG = 32.5;
                state.currentCostPerMile = 0.15;
                state.fuelPrice = 3.50;
                
                // Reset UI
                activityCards.forEach(card => {
                    card.classList.remove('completed');
                    const status = card.querySelector('.activity-status');
                    status.textContent = 'Not Started';
                    status.style.color = '';
                    const feedback = card.querySelector('.feedback-container');
                    feedback.classList.remove('show');
                });
                
                // Reset Activity 1 controls
                document.querySelectorAll('#driving-controls .control-btn').forEach(btn => {
                    btn.classList.remove('active', 'incorrect');
                });
                
                // Reset Activity 2 quiz
                document.querySelectorAll('#activity-2 .quiz-option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                // Reset Activity 3 calculator
                document.getElementById('calculator-results').classList.remove('show');
                
                // Reset Activity 1 displays
                const simCar = document.getElementById('sim-car');
                if (simCar) simCar.style.left = '50px';
                
                // Reset results
                resultsPanel.classList.remove('show');
                
                // Reset timer
                state.startedAt = new Date();
                state.timeSpent = 0;
                
                // Re-initialize Activity 1 displays
                initActivity1();
                
                // Update progress
                updateProgress();
            }

            // View Results
            function viewResults() {
                let totalScore = 0;
                let maxScore = 0;
                
                Object.values(state.activities).forEach(activity => {
                    if (activity.completed) {
                        totalScore += activity.score;
                        maxScore += 100;
                    }
                });
                
                const averageScore = maxScore > 0 ? Math.round(totalScore / (maxScore / 100)) : 0;
                finalScore.textContent = `${averageScore}%`;
                
                resultsPanel.classList.add('show');
                resultsPanel.scrollIntoView({ behavior: 'smooth' });
            }

            // Initialize all activities
            initActivity1();
            initActivity2();
            initActivity3();

            // Event listeners
            resetBtn.addEventListener('click', resetSimulation);
            resultsBtn.addEventListener('click', viewResults);

            // Initial update
            updateTimer();
            updateProgress();
        });
    </script>
</body>
</html>
